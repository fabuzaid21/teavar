{"version":3,"sources":["Header.jsx","TEInputs.jsx","StockInputs.jsx","TEOutputs.jsx","Login.jsx","StockOutputs.jsx","ForceGraph.jsx","App.js","serviceWorker.js","index.js"],"names":["StyledHeader","styled","div","_templateObject","Header","_this","this","modes","props","map","mode","num","react_default","a","createElement","key","className","onClick","e","setMode","id","Component","StyledInputs","TEInputs_templateObject","TEInputs","name","onChange","handleTEInput","target","value","default","type","placeholder","handleTESubmit","StockInputs_templateObject","StockInputs","matches","tickerInputs","tickers","ticker","concat","handleTickerValue","tickerMatches","StockInputs_StyledInputs","handleAddTicker","handleStockInput","handleTickerSubmit","TEOutputs_templateObject","Table","table","_templateObject2","StyledLogin","Login_templateObject","Login_templateObject2","Login","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","password","v","setState","_this2","Login_StyledInputs","handlePassword","login","StyledOutputs","StockOutputs_templateObject","SVG","svg","StockOutputs_templateObject2","AllocationTable","_templateObject3","InfoTable","_templateObject4","StockOutputs","console","log","beta","data","optimal_b","roi","budget","cvar","optimal_cvar","var","optimal_var","optimal_a","selected","allocation","gain","drawGraph","bind","assertThisInitialized","selectLine","highlightCircles","d","_this3","d3","style","attr","circle","filter","c","i","beta_vals","g_vals","gains","b","values","g","j","line_id","point_id","length","push","xScale","domain","range","width","scalesY","yScale","height","color","append","line","x","y","lines","selectAll","enter","on","text","formatter","xAxis","ticks","tickFormat","yAxis","allocation_info","point_info","_this4","statement_header","statement_weights","forEach","w","Math","round","ref","StyledResults","ForceGraph_templateObject","ForceGraph_templateObject2","PathTable","ForceGraph_templateObject3","OuterTable","ForceGraph_templateObject4","ForceGraph","simulation","numSelected","firstSelected","secondSelected","nodeSize","edgeLength","flows","showPaths","showUtilization","edgesByTunnel","nodesByTunnel","tunnelIndex","scenario","downLinks","dashLinks","colorNodes","secondaryNodes","secondaryTunnels","scenarios","capacity","failure_probabilities","flowid","backFlowid","tips","graph","num_nodes","limitTraffic","click","arrowPress","dragstarted","dragged","dragended","changeTunnel","topology","clearGraph","f","T","Tf","links","demand","probabilities","X","nodes","tunnels","getTunnels","src","toString","dst","permissable","satisfiedDemand","totalDemand","reduce","s","sentTraffic","Array","fill","satisfied","flow","total_weight","numAvailable","tunnel","t","weight","congested","link","ls","l","index","scenarioSatisfaction","updateGraph","active","alphaTarget","restart","fx","fy","String","getBackLink","forwardLinks","source","backLinks","includes","dash","animate","clearInterval","dashInterval","offset","setInterval","node1","node2","ret","allTunnels","availability","prob","edges_used","edge","sent","backindex","line1","line2","tip","select","parentNode","rect","bbox","node","getBBox","_this5","remove","each","colorLinks","addTip","resetColors","_this6","keyCode","preventDefault","handleScenario","opacity","_this7","linkTraffic","_loop","_loop2","linklabel","html","bool","_this8","getTunnelNodes","toConsumableArray","backFlow","_this9","demandedFrom","demandedTo","_this10","_this$getNodeDemand","getNodeDemand","_this$getNodeDemand2","slicedToArray","getFlow","_this11","document","addEventListener","force","distance","strength","getBoundingClientRect","then","error","objectSpread","that","xpos","angle","atan2","cos","ypos","sin","transition","duration","pageX","pageY","path_info","_this12","limitButton","utilizationButton","sentDemand","thead","demandRows","sentRows","satisfiedRows","_loop3","demandRow","sentRow","satisfiedRow","_loop4","parseInt","paddingLeft","ForceGraph_SVG","pointerEvents","padding","TESection","App_templateObject","StyledError","App_templateObject2","App","te","inputs","path","cutoff","k","downscale_demand","zeroindex","demand_matrix","results","show_results","stocks","days","KEYS","removeError","defineProperty","newtickers","returns","ticker_ordered","Promise","all","resolve","reject","fetch","method","res","json","daily_returns","daily_data","keys","last","curr","catch","nstocks","body","JSON","stringify","parseFloat","headers","Content-Type","response","oldkey","newkey","message","split","home","header","src_Header","src_TEInputs","src_ForceGraph","src_StockInputs","src_StockOutputs","src_Login","Boolean","window","location","hostname","match","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.822486e2.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport styled from 'styled-components';\n\nconst StyledHeader = styled.div`\n    position: fixed;\n    height: 67px;\n    width: 100vw;\n    top: 0;\n    border-bottom: 1px solid #222;\n    box-shadow: 0 1px 0 #262626;\n    background-color: #191919;\n    background-image: -webkit-gradient(linear,left top,left bottom,from(#282828),to(#191919));\n    background-image: -webkit-linear-gradient(top,#282828,#191919);\n    background-image: linear-gradient(top,#282828,#191919);\n    background-repeat: no-repeat;\n    z-index: 10;\n\n    #left {\n        position: absolute;\n        height: 100%;\n        left: 10px;\n    }\n\n    #center {\n        position: absolute;\n        height: 100%;\n        left: 50%;\n        transform: translateX(-50%);\n        color: white;\n\n        #title {\n            font-size: 25px;\n            padding-top: 15px;\n        }\n    }\n\n    #right {\n        position: absolute;\n        height: 100%;\n        padding-top: 20px;\n        padding-right: 20px;\n        right: 10px;\n        color: white;\n\n        .link {\n            cursor: pointer;\n            &:hover {\n                border-bottom: 1px solid white;\n            }\n        }\n    }\n`;\n\n\nclass Header extends Component {\n  render() {\n    let modes = this.props.modes.map((mode, num) => {\n        return this.props.mode === mode ? \"\" :\n            <div key={num} className=\"link\" onClick={e => this.props.setMode(mode)}>{mode}</div>\n    })\n    return (\n      <div>\n        <StyledHeader>\n            <div id=\"left\">\n            </div>\n            <div id=\"center\">\n                <div id=\"title\">\n                    TEAVAR Demo\n                </div>\n            </div>\n            <div id=\"right\">\n                {modes}\n            </div>\n        </StyledHeader>\n      </div>\n    );\n  }\n}\n\nexport default Header;\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\n\nconst StyledInputs = styled.div`\n    form {\n        margin: 10px;\n        select {\n         -webkit-appearance: button;\n         -webkit-border-radius: 2px;\n         -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n         -webkit-padding-end: 20px;\n         -webkit-padding-start: 2px;\n         -webkit-user-select: none;\n         background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);\n         background-position: 97% center;\n         background-repeat: no-repeat;\n         border: 1px solid #AAA;\n         color: #555;\n         font-size: inherit;\n         overflow: hidden;\n         padding: 5px 10px;\n         text-overflow: ellipsis;\n         white-space: nowrap;\n         width: 370px;\n        }\n    }\n    .input {\n      text-align: center;\n      width: 100%;\n      display: block;\n      height: 50px;\n\n      select {\n        border: none;\n      }\n\n      input, form {\n        font-size: 20px;\n        margin-left: 0;\n        margin-right: 0;\n        display: inline-block;\n        border-left: none;\n        border-right: 1px solid #AAA;\n        border-top: 1px solid #AAA;\n        border-bottom: 1px solid #AAA;\n        border-top-left-radius: 0px;\n        border-bottom-left-radius: 0px;\n      }\n    }\n\n    .input_label {\n      color: white;\n      display: inline-block;\n      width: 90px;\n      height: calc(100% - 29px);\n      background-color: #999;\n      vertical-align: top;\n      margin: 10px 0px;\n      padding: 6px 10px;\n      border-left: 1px solid #AAA;\n      border-top: 1px solid #AAA;\n      border-bottom: 1px solid #AAA;\n      font-size: 18px;\n    }\n\n    input {\n      position: relative;\n      display: block;\n      margin: 10px auto;\n      -webkit-appearance: button;\n      -webkit-border-radius: 2px;\n      -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n      -webkit-padding-end: 20px;\n      -webkit-padding-start: 2px;\n      -webkit-user-select: none;\n      border: 1px solid #AAA;\n      color: #555;\n      font-size: inherit;\n      overflow: hidden;\n      padding: 5px 10px;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      width: 350px;\n    }\n    button {\n      margin: 10px;\n      font-size: 20px;\n    }\n`;\n\nclass TEInputs extends Component {\n    render() {\n        return (\n          <div>\n            <StyledInputs>\n              <div className=\"input\">\n                  <div className=\"input_label\">Topology</div>\n                  <form>\n                  <select name=\"dropdown\" onChange={e => this.props.handleTEInput(e.target.value, \"topology\")}>\n                      <option value=\"Custom\" default>Small Net</option>\n                      <option value=\"B4\">B4</option>\n                      <option value=\"IBM\">IBM</option>\n                      <option value=\"Abilene\">Abilene</option>\n                  </select>\n                  </form>\n                </div>              \n              <div className=\"input\">\n                  <div className=\"input_label\">Demand</div>\n                  <form>\n                  <select name=\"dropdown\" onChange={e => this.props.handleTEInput(e.target.value, \"demand\")}>\n                      <option value=\"1\" default>1</option>\n                      <option value=\"2\">2</option>\n                      <option value=\"3\">3</option>\n                      <option value=\"4\">4</option>\n                      <option value=\"5\">5</option>\n                      <option value=\"6\">6</option>\n                  </select>\n                </form>\n              </div>\n              <div className=\"input\">\n                  <div className=\"input_label\">Paths</div>\n                  <form>\n                  <select name=\"dropdown\" onChange={e => this.props.handleTEInput(e.target.value, \"path\")}>\n                      <option value=\"SMORE\" default>Oblivious</option>\n                      <option value=\"ED\" default>ED</option>\n                      <option value=\"ksp_2\">KSP_2</option>\n                      <option value=\"ksp_4\">KSP_4</option>\n                      <option value=\"ksp_6\">KSP_6</option>\n                  </select>\n                </form>\n              </div>\n              <div className=\"input\">\n                <div className=\"input_label\">Beta (%)</div>\n                <input\n                  type=\"text\"\n                  placeholder=\"0.9\"\n                  onChange={e => this.props.handleTEInput(e.target.value, \"beta\")}\n                />\n              </div>\n              <div className=\"input\">\n                <div className=\"input_label\">Cutoff (%)</div>\n                <input\n                  type=\"text\"\n                  placeholder=\"0.0001\"\n                  onChange={e => this.props.handleTEInput(e.target.value, \"cutoff\")}\n                />\n              </div>\n              <button onClick={e => this.props.handleTESubmit()}>\n                Submit\n              </button>\n            </StyledInputs>\n          </div>\n        );\n    }\n}\n\nexport default TEInputs;\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\n\n\nconst StyledInputs = styled.div`\n    margin 40px auto;\n    text-align: center;\n\n    form {\n        margin: 10px;\n        select {\n         -webkit-appearance: button;\n         -webkit-border-radius: 2px;\n         -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n         -webkit-padding-end: 20px;\n         -webkit-padding-start: 2px;\n         -webkit-user-select: none;\n         background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);\n         background-position: 97% center;\n         background-repeat: no-repeat;\n         border: 1px solid #AAA;\n         color: #555;\n         font-size: inherit;\n         overflow: hidden;\n         padding: 5px 10px;\n         text-overflow: ellipsis;\n         white-space: nowrap;\n         width: 300px;\n        }\n    }\n\n\n    .input {\n      text-align: center;\n      width: 100%;\n      display: block;\n      height: 50px;\n\n      input {\n        display: inline-block;\n        border-left: none;\n        border-right: 1px solid #AAA;\n        border-top: 1px solid #AAA;\n        border-bottom: 1px solid #AAA;\n        border-top-left-radius: 0px;\n        border-bottom-left-radius: 0px;\n      }\n    }\n\n    .input_label {\n      color: white;\n      display: inline-block;\n      width: 75px;\n      height: calc(100% - 34px);\n      background-color: #999;\n      vertical-align: top;\n      margin: 10px 0px;\n      padding: 6px 10px;\n      border-left: 1px solid #AAA;\n      border-top: 1px solid #AAA;\n      border-bottom: 1px solid #AAA;\n      font-size: 14px;\n    }\n\n    input {\n      position: relative;\n      display: block;\n      margin: 10px auto;\n      -webkit-appearance: button;\n      -webkit-border-radius: 2px;\n      -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n      -webkit-padding-end: 20px;\n      -webkit-padding-start: 2px;\n      -webkit-user-select: none;\n      border: 1px solid #AAA;\n      color: #555;\n      font-size: inherit;\n      overflow: hidden;\n      padding: 5px 10px;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      width: 278px;\n    }\n    .matches {\n      position: relative;\n      top: 10px;\n    }\n    button {\n      margin: 10px;\n    }\n`;\n\nclass StockInputs extends Component {\n\n    render() {\n        const tickerInputs =\n            this.props.tickers.map((ticker, num) => {\n                return (\n                    <input\n                      key={num}\n                      type=\"text\"\n                      placeholder={`Ticker ${num}`}\n                      value={ticker}\n                      onChange={e => this.props.handleTickerValue(e.target.value, num)}\n                    />\n\n                );\n            });\n\n        let matches\n        if (this.props.tickerMatches) {\n          matches = this.props.tickerMatches.map(ticker => (<div>{ticker[\"1. symbol\"]}</div>))\n        }\n\n        return (\n          <div>\n            <StyledInputs>\n              <div className=\"tickers_label\">Portfolio Tickers</div>\n\n                {tickerInputs}\n              <div>\n                {matches}\n              </div>\n              <button onClick={e => this.props.handleAddTicker()}>\n                Add\n              </button>\n              <div className=\"input\">\n                <div className=\"input_label\">Budget ($)</div>\n                <input\n                  type=\"text\"\n                  placeholder=\"1000\"\n                  onChange={e => this.props.handleStockInput(e.target.value, \"budget\")}\n                />\n              </div>\n              <div className=\"input\">\n                <div className=\"input_label\">Return ($)</div>\n                <input\n                  type=\"text\"\n                  placeholder=\"50\"\n                  onChange={e => this.props.handleStockInput(e.target.value, \"roi\")}\n                />\n              </div>\n              <div className=\"input\">\n                <div className=\"input_label\">Loss ($)</div>\n                <input\n                  type=\"text\"\n                  placeholder=\"40\"\n                  onChange={e => this.props.handleStockInput(e.target.value, \"target\")}\n                />\n              </div>\n              {/*<input\n                type=\"text\"\n                placeholder=\"1000\"\n                onChange={e => this.props.handleStockInput(e.target.value, \"days\")}\n              />*/}\n              <button onClick={e => this.props.handleTickerSubmit()}>\n                Submit\n              </button>\n            </StyledInputs>\n          </div>\n        );\n    }\n}\n\n\nexport default StockInputs;\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\n\nconst Allocation = styled.div`\n  color: white;\n`;\n\nconst Table = styled.table`\n  color: white;\n  background-color: #444;\n  border-radius: 10px;\n  margin: 30px auto;\n  tr {\n    border: 1px solid gray;\n    td {\n      padding: 10px;\n    }\n  }\n  .border-bottom {\n    border-bottom: 1px solid white;\n    padding: 6px 0px;\n  }\n  .border-right {\n    border-right: 1px solid white;\n    padding: 0px 6px;\n  }\n`;\n\n\nclass TEOutputs extends Component {\n\n    constructor(props) {\n        super(props);\n        // let flows = new Array(6);\n        // let demand = new Array(6);\n        // let satisfied = new Array(6);\n        // for (let i = 0; i < flows.length; i++) {\n        //   demand[i] = new Array(6);\n        //   flows[i] = new Array(6);\n        //   satisfied[i] = new Array(6);\n        //   for (let j = 0; j < 6; j++) {\n        //     flows[i][j] = \"-\";\n        //     demand[i][j] = \"-\";\n        //     satisfied[i][j] = \"-\";\n        //   }\n        // }\n\n\n        // this.state = {\n        //   flows: flows,\n        //   demand: demand,\n        //   satisfied: satisfied,\n        // }\n      let flows = new Array(Number(props.num_nodes));\n      let demand = new Array(Number(props.num_nodes));\n      let satisfied = new Array(Number(props.num_nodes));\n      for (let i = 0; i < flows.length; i++) {\n        flows[i] = new Array(Number(props.num_nodes));\n        demand[i] = new Array(Number(props.num_nodes));\n        satisfied[i] = new Array(Number(props.num_nodes));\n        for (let j = 0; j < props.num_nodes; j++) {\n          flows[i][j] = \"-\";\n          demand[i][j] = \"-\";\n          satisfied[i][j] = \"-\";\n        }\n      }\n      let offset = props.zeroindex ? 1 : 0;\n      for (let i = 0; i < props.data.flows.length; i++) {\n        let a = props.data.allocation[i].reduce((partial_sum, s) => partial_sum + s);\n        flows[props.data.flows[i][0]-offset][props.data.flows[i][1]-offset] = Math.round(a * 100) / 100;\n        demand[props.data.flows[i][0]-offset][props.data.flows[i][1]-offset] = Math.round(props.data.demand[i] * 100) / 100;\n        satisfied[props.data.flows[i][0]-offset][props.data.flows[i][1]-offset] = Math.round(a /props.data.demand[i] * 100) + \"%\";\n      };\n      this.state = {\n        ...this.state,\n        flows: flows,\n        demand: demand,\n        satisfied: satisfied,\n      }\n    }\n\n    componentWillReceiveProps(props) {\n      console.log(props)\n      let flows = new Array(Number(props.num_nodes));\n      let demand = new Array(Number(props.num_nodes));\n      let satisfied = new Array(Number(props.num_nodes));\n      for (let i = 0; i < flows.length; i++) {\n        flows[i] = new Array(Number(props.num_nodes));\n        demand[i] = new Array(Number(props.num_nodes));\n        satisfied[i] = new Array(Number(props.num_nodes));\n        for (let j = 0; j < props.num_nodes; j++) {\n          flows[i][j] = \"-\";\n          demand[i][j] = \"-\";\n          satisfied[i][j] = \"-\";\n        }\n      }\n      let offset = props.zeroindex ? 1 : 0;\n      for (let i = 0; i < props.data.flows.length; i++) {\n        let a = props.data.allocation[i].reduce((partial_sum, s) => partial_sum + s);\n        flows[props.data.flows[i][0]-offset][props.data.flows[i][1]-offset] = Math.round(a * 100) / 100;\n        demand[props.data.flows[i][0]-offset][props.data.flows[i][1]-offset] = Math.round(props.data.demand[i] * 100) / 100;\n        satisfied[props.data.flows[i][0]-offset][props.data.flows[i][1]-offset] = Math.round(a /props.data.demand[i] * 100) + \"%\";\n      };\n      this.setState({\n        ...this.state,\n        flows: flows,\n        demand: demand,\n        satisfied: satisfied,\n      })\n    }\n\n    render() {\n        let key = 0;\n        let flows = []\n        let thead = []\n        if (this.state.flows[0]) {\n          for (let i = 0; i < this.state.flows[0].length; i++) {\n            thead.push(<th className=\"border-bottom\" key={key++}>{i}</th>)\n          }\n        }\n        flows.push(<tr key={key++}><th></th>{thead}</tr>)\n\n        for (let i = 0; i < this.state.flows.length; i++) {\n          let row = this.state.flows[i]\n          let rowDOM = []\n          for (let j = 0; j < row.length; j++) {\n            rowDOM.push(<td key={key++}>{row[j]}</td>);\n          }\n          flows.push(<tr key={key++}><th className=\"border-right\">{i}</th>{rowDOM}</tr>);\n        }\n\n\n        let demand = []\n        thead = []\n        if (this.state.demand[0]) {\n          for (let i = 0; i < this.state.demand[0].length; i++) {\n            thead.push(<th className=\"border-bottom\" key={key++}>{i}</th>)\n          }\n        }\n        demand.push(<tr key={key++}><th></th>{thead}</tr>)\n\n        for (let i = 0; i < this.state.demand.length; i++) {\n          let row = this.state.demand[i]\n          let rowDOM = []\n          for (let j = 0; j < row.length; j++) {\n            rowDOM.push(<td key={key++}>{row[j]}</td>);\n          }\n          demand.push(<tr key={key++}><th className=\"border-right\">{i}</th>{rowDOM}</tr>);\n        }\n\n        let satisfied = []\n        thead = []\n        if (this.state.satisfied[0]) {\n          for (let i = 0; i < this.state.satisfied[0].length; i++) {\n            thead.push(<th className=\"border-bottom\" key={key++}>{i}</th>)\n          }\n        }\n        satisfied.push(<tr key={key++}><th></th>{thead}</tr>)\n\n        for (let i = 0; i < this.state.satisfied.length; i++) {\n          let row = this.state.satisfied[i]\n          let rowDOM = []\n          for (let j = 0; j < row.length; j++) {\n            rowDOM.push(<td key={key++}>{row[j]}</td>);\n          }\n          satisfied.push(<tr key={key++}><th className=\"border-right\">{i}</th>{rowDOM}</tr>);\n        }\n        return (\n          <div>\n            <Table>\n              <tbody>\n                {flows}\n              </tbody>\n            </Table>\n            <Table>\n              <tbody>\n                {demand}\n              </tbody>\n            </Table>\n            <Table>\n              <tbody>\n                {satisfied}\n              </tbody>\n            </Table>\n          </div>\n        );\n    }\n}\n\nexport default TEOutputs;\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\n\nconst StyledLogin = styled.div`\n    margin-top: 30vh;\n`;\n\nconst StyledInputs = styled.div`\n    form {\n        margin: 10px;\n        select {\n         -webkit-appearance: button;\n         -webkit-border-radius: 2px;\n         -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n         -webkit-padding-end: 20px;\n         -webkit-padding-start: 2px;\n         -webkit-user-select: none;\n         background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);\n         background-position: 97% center;\n         background-repeat: no-repeat;\n         border: 1px solid #AAA;\n         color: #555;\n         font-size: inherit;\n         overflow: hidden;\n         padding: 5px 10px;\n         text-overflow: ellipsis;\n         white-space: nowrap;\n         width: 300px;\n        }\n    }\n    .input {\n      text-align: center;\n      width: 100%;\n      display: block;\n      height: 50px;\n\n      select {\n        border: none;\n      }\n\n      .input-elt {\n        font-size: 15px;\n        margin-left: 0;\n        margin-right: 0;\n        display: inline-block;\n        border-left: none;\n        border-right: 1px solid #AAA;\n        border-top: 1px solid #AAA;\n        border-bottom: 1px solid #AAA;\n        border-top-left-radius: 0px;\n        border-bottom-left-radius: 0px;\n      }\n    }\n\n    .input_label {\n      color: white;\n      display: inline-block;\n      width: 75px;\n      height: calc(100% - 34px);\n      background-color: #999;\n      vertical-align: top;\n      margin: 10px 0px;\n      padding: 6px 10px;\n      border-left: 1px solid #AAA;\n      border-top: 1px solid #AAA;\n      border-bottom: 1px solid #AAA;\n      font-size: 14px;\n    }\n\n    .input-elt {\n      position: relative;\n      display: block;\n      margin: 10px auto;\n      -webkit-appearance: button;\n      -webkit-border-radius: 2px;\n      -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n      -webkit-padding-end: 20px;\n      -webkit-padding-start: 2px;\n      -webkit-user-select: none;\n      border: 1px solid #AAA;\n      color: #555;\n      font-size: inherit;\n      overflow: hidden;\n      padding: 5px 10px;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      width: 278px;\n    }\n    .button {\n        color: white;\n        display: block;\n        width: 75px;\n        background-color: #999;\n        vertical-align: top;\n        margin: 10px auto;\n        padding: 6px 10px;\n        border-left: 1px solid #AAA;\n        border-top: 1px solid #AAA;\n        border-bottom: 1px solid #AAA;\n        font-size: 14px;\n        border-radius: 5px;\n    }\n`;\n\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            password: \"\",\n        }\n    }\n\n    handlePassword(v) {\n        this.setState({\n            password: v,\n        })\n    }\n    render() {\n        return (\n          <StyledLogin>\n            <StyledInputs id=\"login-window\">\n              <form className=\"input\">\n                {/* <div className=\"input_label\">Password</div> */}\n                <input\n                  className=\"input-elt\"\n                  type=\"password\"\n                  placeholder=\"\"\n                  onChange={e => this.handlePassword(e.target.value)}\n                />\n                <input\n                    className=\"button\"\n                    type=\"submit\"\n                    onClick={e => this.props.login(this.state.password)}\n                    value=\"Login\"\n                />\n              </form>\n\n            </StyledInputs>\n          </StyledLogin>\n        );\n    }\n}\n\nexport default Login;\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport * as d3 from \"d3\";\n\nconst StyledOutputs = styled.div`\n    position: relative;\n    svg {\n        font-family: Sans-Serif, Arial;\n    }\n    .line {\n      stroke-width: 4;\n      fill: none;\n    }\n\n    .axis path {\n      stroke: black;\n    }\n\n    .text {\n      font-size: 12px;\n    }\n\n    .title-text {\n      font-size: 12px;\n    }\n\n    #all-statements {\n      display: block;\n      width: 100%;\n      border-bottom: 1px solid black;\n    }\n\n    #statement-table {\n      background-color: #EEE;\n      margin-top: 10px;\n    }\n\n    #statements {\n      width: 40%;\n      margin: 0px auto;\n      margin-bottom: 70px;\n      background-color: #EEE;\n      padding: 20px;\n      border-radius: 5px;\n      font-size: 18px;\n      text-align:center;\n\n      div {\n        margin: 20px 0px;\n      }\n      .colorGreen {\n        color: rgb(0,150,0);\n      }\n      .colorRed {\n        color: rgb(150, 0,0);\n      }\n    }\n`;\n\nconst SVG = styled.svg`\n  display: block;\n  margin: -60px auto 0px auto;\n  height: 700px;\n  width: 900px;\n`;\n\nconst AllocationTable = styled.table`\n    border: 1px solid gray;\n    background-color: rgba(255, 255, 255, .2);\n    margin: 0px auto;\n    th {\n        padding: 3px 10px;\n    }\n\n    td {\n        padding: 5px 10px;\n        text-align: center;\n    }\n\n    .selected {\n        background-color: rgba(200, 200, 200, .6);\n    }\n`;\n\nconst InfoTable = styled.table`\n    border: 1px solid gray;\n    background-color: rgba(255, 255, 255, .2);\n    margin: 10px auto;\n    margin-top: 70px;\n\n    th {\n        padding: 3px 10px;\n    }\n\n    td {\n        padding: 5px 10px;\n        text-align: center;\n    }\n\n    .selected {\n        background-color: rgba(200, 200, 200, .6);\n    }\n`;\n\nclass StockOutputs extends Component {\n    constructor(props){\n        super(props)\n        console.log(props)\n        this.state = {\n            beta: props.data.optimal_b,\n            roi: props.roi/props.budget,\n            cvar: props.data.optimal_cvar,\n            var: props.data.optimal_var,\n            a: props.data.optimal_a,\n            budget: props.budget,\n            selected: {\n              allocation: props.data.optimal_a,\n              var: props.data.optimal_var,\n              cvar: props.data.optimal_cvar,\n              gain: props.roi/props.budget,\n              name: \"test_\" + props.data.optimal_b,\n              id: -1,\n            }\n        }\n        this.drawGraph = this.drawGraph.bind(this);\n        this.selectLine = this.selectLine.bind(this);\n        this.highlightCircles = this.highlightCircles.bind(this);\n    }\n\n    componentDidMount() {\n        this.drawGraph(this.props.data)\n    }\n\n    componentWillReceiveProps(props) {\n        console.log(props);\n        this.setState({\n          // allocation: props.data.optimal_a,\n          // var: props.data.optimal_var,\n          // cvar: props.data.optimal_cvar,\n          beta: props.data.optimal_b,\n          roi: props.roi/props.budget,\n          cvar:  props.data.optimal_cvar,\n          var: props.data.optimal_var,\n          budget: props.budget,\n          a: props.data.optimal_a,\n          selected: {\n            allocation: props.data.optimal_a,\n            var: props.data.optimal_var,\n            cvar: props.data.optimal_cvar,\n            gain: props.roi/props.budget,\n            name: \"test_\" + props.data.optimal_b,\n          }\n        })\n        this.drawGraph(props.data);\n    }\n\n    selectLine(d) {\n        console.log(d)\n        this.setState({\n            selected: d,\n        }, () => {\n          this.highlightCircles();\n        })\n    }\n\n    highlightCircles() {\n        d3.selectAll(\"circle\").style(\"opacity\", .5)\n        d3.selectAll(\"circle\").attr(\"r\", 6)\n        if (this.state.selected) {\n          let circle = d3.selectAll(\"circle\").filter((c, i) => (c.id === this.state.selected.id));\n          circle.style(\"opacity\", 1);\n          circle.attr(\"r\", 8)\n        }\n\n    }\n\n    drawGraph(d) {\n    console.log(d)\n    var beta_vals = d.beta\n    var g_vals = d.gains\n    var id = 0;\n    var data = beta_vals.map((b,i) => {\n      var values = g_vals.map((g,j) => {\n        return {\n          gain: g,\n          cvar: d.cvar[i][j],\n          var: d.var[i][j],\n          allocation: d.allocation[i][j],\n          name: \"test_\" + b,\n          line_id: i,\n          point_id: j,\n          id: id++,\n        }\n      });\n      return {\n        name: \"Beta=\" + b,\n        values: values,\n        beta: b,\n        id: i,\n      }\n    });\n    var line_id = data.length\n    data.push({\n      name: \"Beta=\" + d.optimal_b,\n      beta: d.optimal_b,\n      id: id++,\n      values: [{\n          gain: this.props.roi/this.props.budget,\n          cvar: d.optimal_cvar,\n          var: d.optimal_var,\n          allocation: d.optimal_a,\n          name: \"test_\" + d.optimal_b,\n          line_id: line_id + 1,\n          point_id: -1,\n          id: -1,\n      }],\n    })\n\n    console.log(data)\n    var width = 800;\n    var height = 600;\n    var margin = 100;\n    var duration = 100;\n\n    var lineOpacity = \"0.25\";\n    var lineOpacityHover = \"0.6\";\n    var otherLinesOpacityHover = \"0.1\";\n    var lineStroke = \"4px\";\n    var lineStrokeHover = \"4px\";\n\n    var circleOpacity = '0.85';\n    var circleOpacityOnLineHover = \"0.25\"\n    var circleRadius = 6;\n    var circleRadiusHover = 8;\n\n    /* Scale */\n    var xScale = d3.scaleLinear ()\n      .domain(d3.extent(data[0].values, d => d.gain))\n      .range([0, width-margin]);\n\n    var scalesY = d.cvar\n    scalesY.push([d.optimal_cvar])\n    var yScale = d3.scaleLinear()\n      .domain([d3.min(scalesY.map(cvar => d3.min(cvar, d => d)), d => d), d3.max(scalesY.map(cvar => d3.max(cvar, d => d)), d => d)])\n      .range([height-margin, 0]);\n\n    var color = d3.scaleOrdinal(d3.schemeCategory10);\n\n    /* Add SVG */\n    var svg = d3.select(this.svg)\n      .append('g')\n      .attr(\"height\", (height + margin) + \"px\")\n      .attr(\"width\", (width + margin) + \"px\")\n      .attr(\"transform\", `translate(${margin}, ${margin})`);\n\n    svg.append(\"text\")\n      .attr(\"class\", \"title-text\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"x\", (width-margin)/2)\n      .attr(\"y\", 5);\n\n    /* Add line into SVG */\n    var line = d3.line()\n      .x(d => xScale(d.gain))\n      .y(d => yScale(d.cvar));\n\n    let lines = svg.append('g')\n      .attr('class', 'lines');\n\n\n    let highlightCircles = this.highlightCircles;\n    lines.selectAll('.line-group')\n      .data(data).enter()\n      .append('g')\n      .attr('class', 'line-group')\n      .append('path')\n      .attr('class', 'line')\n      .attr('d', d => line(d.values))\n      .style('stroke', (d, i) => color(i))\n      .style('opacity', lineOpacity)\n      .on(\"mouseover\", function(d, i) {\n          d3.selectAll('.line')\n            .style('opacity', otherLinesOpacityHover);\n          d3.selectAll(\"circle\").filter((c, i) => (c.line_id === d.id))\n            .attr('opacity', 1);\n          d3.select(this)\n            .style('opacity', lineOpacityHover)\n            .style(\"stroke-width\", lineStrokeHover)\n            .style(\"cursor\", \"pointer\");\n        })\n      .on(\"mouseout\", function(d) {\n          highlightCircles();\n          d3.select(this)\n            .style('opacity', lineOpacity)\n            .style(\"stroke-width\", lineStroke)\n            .style(\"cursor\", \"pointer\");\n        });\n\n\n    /* Add circles in the line */\n    lines.selectAll(\"circle-group\")\n      .data(data).enter()\n      .append(\"g\")\n      .attr(\"id\", (d,i) => `circle-group-${i}`)\n      .attr(\"class\", \"circle-group\")\n      .style(\"fill\", (d, i) => color(i))\n      .selectAll(\"circle\")\n      .data(d => d.values).enter()\n      .append(\"g\")\n      .attr(\"class\", \"circle\")\n      .attr(\"id\", (d,i) => `circle-${i}`)\n      .on(\"click\", this.selectLine)\n      // .on(\"mouseover\", function(d) {\n      //     d3.select(this)\n      //       .style(\"cursor\", \"pointer\")\n      //       .append(\"text\")\n      //       .attr(\"class\", \"text\")\n      //       .text(`${d.cvar}`)\n      //       .attr(\"x\", d => xScale(d.gain) + 5)\n      //       .attr(\"y\", d => yScale(d.cvar) - 10);\n      //   })\n      // .on(\"mouseout\", function(d) {\n      //     d3.select(this)\n      //       .style(\"cursor\", \"none\")\n      //       .transition()\n      //       .duration(duration)\n      //       .selectAll(\".text\").remove();\n      //   })\n      .append(\"circle\")\n      .attr(\"cx\", d => xScale(d.gain))\n      .attr(\"cy\", d => yScale(d.cvar))\n      .attr(\"r\", circleRadius)\n      .style('opacity', circleOpacity)\n      .on(\"mouseover\", function(d, i) {\n          d3.selectAll(\"circle\").filter((c, i) => (c.id === d.id))\n            .attr(\"r\", circleRadiusHover);\n        })\n      .on(\"mouseout\", function(d) {\n          d3.selectAll(\"circle\").filter((c, i) => (c.id === d.id))\n            .attr(\"r\", circleRadius);\n          highlightCircles();\n      })\n\n    d3.selectAll(\".circle-group\")\n      .append(\"text\")\n      .attr(\"class\", \"text\")\n      .text(d => d.name)\n      .attr(\"x\", d => xScale(d.values[0].gain) + 20)\n      .attr(\"y\", d => yScale(d.values[0].cvar))\n\n    /* Add Axis into SVG */\n    var formatter = d3.format(\".3p\");\n    var xAxis = d3.axisBottom(xScale).ticks(5).tickFormat(formatter);\n    var yAxis = d3.axisLeft(yScale).ticks(5).tickFormat(formatter);\n\n    svg.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", `translate(0, ${height-margin})`)\n      .call(xAxis)\n      .append('text')\n        .attr(\"x\", (width-margin)/2)\n        .attr(\"y\", \"45\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"fill\", \"#000\")\n        .attr(\"font-size\", \"18px\")\n        .text(\"Return on Investment (%)\");\n\n    svg.append(\"g\")\n      .attr(\"class\", \"y axis\")\n      .attr(\"dy\", \"1em\")\n      .call(yAxis)\n      .append('text')\n      .attr(\"y\", -50)\n      .attr(\"x\", -(height - margin)/2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"fill\", \"#000\")\n      .attr(\"font-size\", \"18px\")\n      .text(\"Conditional Value at Risk (%)\");\n\n    this.highlightCircles();\n  }\n    render() {\n        let allocation_info;\n        let point_info;\n        let statement_header = []\n        let statement_weights = []\n        this.state.a.forEach((w,i) => {\n            statement_header.push(<th x=\"0\">{this.props.tickers[i]}</th>)\n            statement_weights.push(<td x=\"0\">${Math.round(w * 100 * this.state.budget)/100}</td>)\n        })\n\n        if (this.state.selected) {\n            point_info = (<tr>\n                            <td x=\"0\">{Math.round(this.state.selected.var * 100000)/1000}%</td>\n                            <td x=\"50\">{Math.round(this.state.selected.cvar * 100000)/1000}%</td>\n                            <td x=\"50\">{Math.round(this.state.selected.gain * 100000)/1000}%</td>\n                        </tr>)\n            allocation_info = this.state.selected.allocation.map((w, i) => {\n                return <tr key={i}>\n                            <td x=\"0\">{this.props.tickers[i]}</td>\n                            <td x=\"50\">{Math.round(w * 100000)/1000}%</td>\n                        </tr>\n            })\n        }\n\n        console.log(this.state)\n        return (\n          <StyledOutputs>\n            <div id=\"all-statements\">\n              <InfoTable id=\"statement-table\">\n                <tbody>\n                  <tr>\n                    {statement_header}\n                  </tr>\n                  <tr>\n                    {statement_weights}\n                  </tr>\n                </tbody>\n              </InfoTable>\n              <div id=\"statements\">\n                <div>Your gain is\n                  <span className=\"colorGreen\"> {Math.round(this.state.roi * 100 * this.state.budget)/100}$ </span>\n                  return on invesment\n                </div>\n                <div>Your loss is no less than\n                  <span className=\"colorRed\"> {Math.round(this.state.var * 100 * this.state.budget)/100}$ </span>\n                  with probability\n                  <span className=\"colorGreen\"> {Math.round(this.state.beta * 100000)/1000}% </span>\n                </div>\n                <div>In the worst\n                  <span className=\"colorGreen\"> {Math.round((1-this.state.beta) * 100000)/1000}% </span>\n                  of days, your average loss is\n                  <span className=\"colorRed\"> {Math.round(this.state.cvar * 100 * this.state.budget)/100}$</span>\n                </div>\n              </div>\n            </div>\n            <InfoTable>\n              <tbody>\n                  <tr>\n                      <th>VAR</th>\n                      <th>CVAR</th>\n                      <th>ROI</th>\n                  </tr>\n                  { point_info }\n              </tbody>\n            </InfoTable>\n            <AllocationTable>\n              <tbody>\n                  <tr>\n                      <th>Ticker</th>\n                      <th>weight</th>\n                  </tr>\n                  { allocation_info }\n              </tbody>\n            </AllocationTable>\n            <SVG\n              ref={svg => this.svg = svg}\n            >\n            </SVG>\n\n {/*<div>\n               VAR:\n               <div>\n                 {this.props.data.var}\n               </div>\n             </div>\n             <div>\n               CVAR:\n               <div>\n                 {this.props.data.cvar}\n               </div>\n             </div>\n             <div>\n               Allocation:\n               <div>\n                 {this.props.data.allocation}\n               </div>\n             </div>*/}\n          </StyledOutputs>\n        );\n    }\n}\n\nexport default StockOutputs;\n","import React, {Component} from 'react';\nimport * as d3 from \"d3\";\nimport styled from 'styled-components';\n\nconst StyledResults = styled.div`\n    height: 100%;\n    .tableTitle {\n        margin-top: 20px;\n        text-align: center;\n    }\n`;\n\nconst SVG = styled.svg`\n    width: 100%;\n    height: 100%;\n\n    .links line {\n      stroke: #888;\n      stroke-width: 6;\n    }\n\n    .nodes circle {\n      pointer-events: all;\n      stroke: none;\n      stroke-width: 15px;\n      cursor: pointer;\n    }\n\n    #limitButton {\n        padding: 5px 10px;\n        border: 1px solid #AAA;\n        width: 100px;\n        text-align: center;\n        cursor: pointer;\n        background-color: #DEDEDE;\n        pointer-events: auto;\n        position: absolute;\n        bottom: 7px;\n        left: 7px;\n    }\n\n    #utilizationButton {\n        padding: 5px 10px;\n        border: 1px solid #AAA;\n        width: 100px;\n        text-align: center;\n        cursor: pointer;\n        background-color: #DEDEDE;\n        pointer-events: auto;\n    }\n\n    select {\n        position: absolute;\n        bottom: 8px;\n        right: 8px;\n        -webkit-appearance: button;\n        -webkit-border-radius: 2px;\n        -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n        -webkit-padding-end: 20px;\n        -webkit-padding-start: 2px;\n        -webkit-user-select: none;\n        background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);\n        background-position: 97% center;\n        background-repeat: no-repeat;\n        border: 1px solid #AAA;\n        color: #555;\n        overflow: hidden;\n        padding: 5px 35px 5px 10px;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        pointer-events: auto;\n    }\n`\n\nconst PathTable = styled.table`\n    border: 1px solid steelblue;\n    background-color: rgba(255, 255, 255, .2);\n    float: right;\n\n    th {\n        padding: 3px 10px;\n    }\n\n    td {\n        padding: 5px 10px;\n        text-align: center;\n    }\n\n    .selected {\n        background-color: rgba(200, 200, 200, .6);\n    }\n`;\n\nconst OuterTable = styled.table`\n    font-size: 14px;\n    color: white;\n    background-color: #444;\n    border-radius: 10px;\n    margin: 30px auto;\n\n    tr {\n        border: 1px solid gray;\n    td {\n        padding: 10px;\n    }\n    .border-bottom {\n        border-bottom: 1px solid white;\n        padding: 6px 0px;\n    }\n    .border-right {\n        border-right: 1px solid white;\n        padding: 0px 6px;\n    }\n`;\n\nlet colors = [\"#1abc9c\", \"#e74c3c\", \"#3498db\", \"#9b59b6\", \"#34495e\", \"#e67e22\", \"#f1c40f\"];\nlet dashes = [\"5,5\", \"10,10\", \"20, 20\", \"20,10,5,5,5,10\", \"10,10,5,10\"]\n\nclass ForceGraph extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            simulation: \"\",\n            numSelected: 0,\n            firstSelected: null,\n            secondSelected: null,\n            nodeSize: 9,\n            edgeLength: 100,\n            flows: [],\n            allocation: [],\n            showPaths: false,\n            showUtilization: 0,\n            edgesByTunnel: [],\n            nodesByTunnel: [],\n            tunnelIndex: 0,\n            scenario: 0,\n            downLinks: [],\n            dashLinks: [],\n            colorNodes: [],\n            secondaryNodes: [],\n            secondaryTunnels: [],\n            scenarios: [],\n            capacity: [],\n            failure_probabilities: [],\n            flowid: null,\n            backFlowid: null,\n            tips: [],\n            graph: null,\n            num_nodes: 0,\n            limitTraffic: true,\n        }\n        this.click = this.click.bind(this);\n        this.arrowPress = this.arrowPress.bind(this);\n        this.dragstarted = this.dragstarted.bind(this);\n        this.dragged = this.dragged.bind(this);\n        this.dragended = this.dragended.bind(this);\n        this.changeTunnel = this.changeTunnel.bind(this);\n        this.showUtilization = this.showUtilization.bind(this);\n\n    }\n\n    componentDidMount() {\n        this.drawGraph(this.props.topology)\n    }\n\n    componentWillReceiveProps(props) {\n        this.clearGraph();\n        this.drawGraph(props.topology);\n        this.setState({\n            num_nodes: props.num_nodes,\n            f: props.flows,\n            T: props.T,\n            Tf: props.Tf,\n            links: props.links,\n            allocation: props.allocation,\n            demand: props.demand,\n            probabilities: props.probabilities,\n            scenarios: props.scenarios,\n            scenario: 0,\n            showUtilization: 0,\n            capacity: props.capacity,\n            failure_probabilities: props.failure_probabilities,\n            flowid: null,\n            downLinks: [],\n            X: props.X,\n            var: props.var,\n            cvar: props.cvar,\n            limitTraffic: true,\n        }, () => {\n            let flows = {}\n            props.flows.forEach((nodes, flowid) => {\n                let tunnels = this.getTunnels(flowid, nodes[0], nodes[1]);\n                flows[flowid] = {\n                    id: flowid,\n                    src: nodes[0].toString(),\n                    dst: nodes[1].toString(),\n                    tunnels: tunnels,\n                    demand: props.demand[flowid],\n                    permissable: 1 - props.var,\n                };\n            })\n            let satisfiedDemand = [];\n            if (props.scenarios) {\n                let totalDemand = props.demand.reduce((i, j) => i + j);\n                props.scenarios.forEach((scenario, s) => {\n                    let sentTraffic = this.state.graph ? new Array(this.state.graph.links.length).fill(0) : [];\n                    let satisfied = 0;\n                    Object.values(flows).forEach((flow, f) => {\n                        let total_weight = 0;\n                        let numAvailable = 0;\n                        flow.tunnels.forEach((tunnel, t) => {\n                            total_weight += props.X[s][tunnel.id] === 1 ? this.state.allocation[f][t] : 0;\n                            numAvailable += props.X[s][tunnel.id] === 1 ? 1 : 0;\n                        });\n                        flow.tunnels.forEach((tunnel, t) => {\n\n                            let weight = 0\n                            if (props.X[s][tunnel.id] === 1) {\n                                weight = total_weight !== 0 ?\n                                        (this.state.allocation[f][t] / total_weight)  :\n                                        (1 / numAvailable);\n                            } else {\n                                weight = 0;\n                            }\n                            let congested = false;\n                            tunnel.links.forEach(link => {\n                                let ls = this.state.graph.links.filter((l, index) => index === link.index);\n                                if (ls[0] && sentTraffic[link.index] >= ls[0].capacity) {\n                                    congested = true;\n                                }\n                            })\n                            if (!congested) {\n                                tunnel.links.forEach(link => {\n                                    sentTraffic[link.index] += weight * flow.demand * flow.permissable\n                                });\n                                satisfied += weight * flow.demand * flow.permissable\n                            }\n                        })\n                    })\n                    satisfiedDemand.push(satisfied / totalDemand)\n                });\n            };\n            this.setState({\n                flows,\n                scenarioSatisfaction: satisfiedDemand,\n            }, this.updateGraph)\n        });\n    }\n\n    componentDidUpdate(state) {\n        // this.drawGraph()\n    }\n\n    dragstarted(d) {\n      if (!d3.event.active) this.state.simulation.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n\n    dragged(d) {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    }\n\n    dragended(d) {\n      if (!d3.event.active) this.state.simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    }\n\n    handleScenario(scenario) {\n        let downLinks = [];\n        this.state.scenarios[scenario].forEach((scenario, i) => {\n            if (!scenario) {\n                downLinks.push({src: String(this.state.links[i][0]), dst: String(this.state.links[i][1])});\n                downLinks.push(this.getBackLink(this.state.links[i]));\n            }\n        });\n        this.setState({\n            downLinks: downLinks,\n            scenario: scenario,\n        }, () => {\n            let flows = {}\n            this.state.f.forEach((nodes, flowid) => {\n                let tunnels = this.getTunnels(flowid, nodes[0], nodes[1]);\n                flows[flowid] = {\n                    id: flowid,\n                    src: nodes[0].toString(),\n                    dst: nodes[1].toString(),\n                    tunnels: tunnels,\n                    demand: this.state.demand[flowid],\n                };\n            })\n            this.setState({\n                flows,\n            }, () => this.showUtilization(this.state.showUtilization))\n        });\n    }\n\n    colorLinks(links, color){\n        let forwardLinks = d3.selectAll('line').filter((d) => {\n            let filter = false;\n            links.forEach(link => {\n                if (link.src === d.source.id && link.dst === d.target.id) { filter = true }\n            })\n            return filter;\n        })\n        let backLinks = d3.selectAll('line').filter((d) => {\n            let filter = false;\n            links.forEach(link => {\n                if (link.dst === d.source.id && link.src === d.target.id) { filter = true }\n            })\n            return filter;\n        })\n        forwardLinks.style(\"stroke-opacity\", .6);\n        forwardLinks.style(\"stroke\", color);\n        backLinks.style(\"stroke-opacity\", .6);\n        backLinks.style(\"stroke\", color);\n    }\n\n    colorNodes(nodes, color){\n        let colorNodes = d3.selectAll('circle').filter(function(d) {return (nodes.includes(d.id))})\n        colorNodes.style(\"fill\", color);\n    }\n\n    dashLinks(links, dash, animate){\n        clearInterval(this.dashInterval);\n        let forwardLinks = d3.selectAll('line').filter((d) => {\n            let filter = false;\n            links.forEach(link => {\n                if (link.src === d.source.id && link.dst === d.target.id) { filter = true }\n            })\n            return filter;\n        })\n        let backLinks = d3.selectAll('line').filter((d) => {\n            let filter = false;\n            links.forEach(link => {\n                if (link.dst === d.source.id && link.src === d.target.id) { filter = true }\n            })\n            return filter;\n        })\n        forwardLinks.style(\"stroke-opacity\", 1);\n        forwardLinks.style(\"stroke-dasharray\", dash);\n        var offset = 1;\n        if (animate) {\n            this.dashInterval = setInterval(function() {\n                forwardLinks.style('stroke-dashoffset', offset);\n                offset -= 1; \n            }, 50);\n        }\n        backLinks.style(\"stroke-opacity\", 0);\n        backLinks.style(\"stroke-dasharray\", dash);\n        forwardLinks.attr('marker-end','url(#arrowhead)')\n    }\n\n    getTunnelNodes(tunnel) {\n        let nodes = []\n        tunnel.links.forEach(link => {\n            if (!nodes.includes(link.src)) { nodes.push(link.src) };\n            if (!nodes.includes(link.dst)) { nodes.push(link.dst) };\n        })\n        return nodes;\n    }\n\n\n    getFlow(node1, node2) {\n        let ret = null\n        Object.values(this.state.flows).forEach(flow => {\n            if (flow.src === node1 && flow.dst === node2) {\n                ret = flow\n            }\n        });\n        return ret\n    }\n\n    getTunnels(f, node1, node2) {\n        let allTunnels = []\n        let tunnels = this.state.Tf[f];\n        let total_weight = 0;\n        let numAvailable = 0;\n        tunnels.forEach((tunnel, t) => {\n            total_weight += this.state.X[this.state.scenario][tunnel - 1] === 1 ? this.state.allocation[f][t] : 0;\n            numAvailable += this.state.X[this.state.scenario][tunnel - 1] === 1 ? 1 : 0;\n        });\n\n        tunnels.forEach((tunnel, t) => {\n            let availability = 0;\n            this.state.probabilities.forEach((prob, s) => {\n                availability += prob * this.state.X[s][tunnel - 1];\n            })\n            let weight = 0\n            if (this.state.X[this.state.scenario][tunnel - 1] === 1) {\n                weight = total_weight !== 0 ?\n                        (this.state.allocation[f][t] / total_weight)  :\n                        (1 / numAvailable);\n            } else {\n                weight = 0;\n            }\n\n\n            let edges_used = this.state.T[tunnel - 1]\n            let links = [];\n            edges_used.forEach(edge => {\n                links.push({\n                    \"src\": this.state.links[edge-1][0].toString(),\n                    \"dst\": this.state.links[edge-1][1].toString(),\n                    \"index\": edge - 1,\n                });\n            });\n            allTunnels.push({\n                links,\n                \"allocation\": this.state.allocation[f][t],\n                \"weight\": weight,\n                \"sent\": this.state.demand[f] * weight,\n                \"availability\": Math.round(availability * 1000000) / 1000000,\n                \"id\": (tunnel - 1),\n            })\n        })\n        return allTunnels\n    }\n\n    getBackLink(link) {\n        let backindex = -1;\n        this.state.links.forEach((l, i) => {\n            if (l[0] === link[1] && l[1] === link[0]) { backindex = i }\n        });\n        return backindex != -1 ? {src: String(this.state.links[backindex][0]), dst: String(this.state.links[backindex][1])} : {};\n    }\n\n    addTip(id, line1, line2) {\n        let circle = d3.selectAll(\"circle\").filter(function (c, i) { return (c.id === id);});\n        let g = circle.select(function() { return this.parentNode; })\n        let tip = g.append(\"g\")\n          .attr(\"class\", \"tip\")\n          .attr(\"transform\", \"translate(\" + 6  + \",\" + 6 + \")\");\n\n        var rect = tip.append(\"rect\")\n          .style(\"fill\", \"white\")\n          .style(\"stroke\", \"steelblue\")\n          .style(\"opacity\", .8)\n\n        tip.append(\"text\")\n          .text(line1)\n          .attr(\"dy\", \"1.2em\")\n          .attr(\"x\", 8);\n\n        tip.append(\"text\")\n          .text(line2)\n          .attr(\"dy\", \"2.4em\")\n          .attr(\"x\", 8);\n\n        let bbox = tip.node().getBBox();\n        rect.attr(\"width\", bbox.width + 15)\n            .attr(\"height\", bbox.height + 10)\n    }\n\n    updateGraph() {\n        d3.selectAll('.tip').remove();\n        d3.selectAll('line').each(function(d) {d3.select(this).style(\"stroke-opacity\", .1)});\n        d3.selectAll('line').each(function(d) {d3.select(this).style(\"stroke-dasharray\", \"\")});\n        d3.selectAll('line').each(function(d) {d3.select(this).style(\"stroke\", \"#888\")});\n        d3.selectAll('line').attr('marker-end','');\n        d3.selectAll('circle').each(function(d) {d3.select(this).style(\"fill\", \"lightgrey\")});\n        d3.selectAll(\".aEnd\").style(\"opacity\", this.state.showUtilization);\n        \n        this.state.secondaryTunnels.forEach((tunnel, i) => {\n            // this.dashLinks(tunnel, \"2,2\", false);\n            this.colorLinks(tunnel, \"#bbb\");\n        })\n        this.colorNodes(this.state.secondaryNodes, \"#bbb\");\n        this.dashLinks(this.state.dashLinks, \"5,5\", true);\n        this.colorNodes(this.state.colorNodes, \"#aaa\");\n\n        d3.selectAll(\"circle\").filter((c, i) => (c.id === this.state.firstSelected || c.id === this.state.secondSelected)).style(\"fill\", \"steelblue\");\n        this.state.tips.forEach(tip => {\n            this.addTip(tip.id, tip.line1, tip.line2);\n        })\n\n        if (this.state.firstSelected === null && this.state.secondSelected === null) {\n            this.resetColors();\n        }\n        this.colorLinks(this.state.downLinks, \"red\");\n    }\n\n    resetColors() {\n        d3.selectAll('line').each(function(d) {d3.select(this).style(\"stroke-opacity\", 1)});\n        d3.selectAll('line').each(function(d) {d3.select(this).style(\"stroke-dasharray\", \"\")});\n        d3.selectAll('line').each(function(d) {d3.select(this).style(\"stroke\", \"#888\")});\n        d3.selectAll('line').attr('marker-end','');\n        d3.selectAll('circle').each(function(d) {d3.select(this).style(\"fill\", \"black\")});\n    }\n\n    clearGraph() {\n        d3.selectAll(\"svg > .tip\").remove();\n        d3.selectAll(\"svg > .links\").remove();\n        d3.selectAll(\"svg > .nodes\").remove();\n        this.setState({\n            showPaths: false,\n            firstSelected: null,\n            secondSelected: null,\n            numSelected: 0,\n            tips: [],\n        }, () => {console.log(this.state)})\n    }\n\n    arrowPress(e) {\n        // this.showUtilization();\n        if (e.keyCode === 39 && this.state.flows[this.state.flowid]) {\n            let tunnelIndex = (this.state.tunnelIndex + 1 >= this.state.flows[this.state.flowid].tunnels.length) ? 0 : this.state.tunnelIndex + 1;\n            this.changeTunnel(tunnelIndex);\n        } else if (e.keyCode === 37 && this.state.flows[this.state.flowid]) {\n            let tunnelIndex = (this.state.tunnelIndex - 1 < 0) ? this.state.flows[this.state.flowid].tunnels.length - 1 : this.state.tunnelIndex - 1;\n            this.changeTunnel(tunnelIndex);\n        } else if (e.keyCode === 38 && this.state.scenarios.length > 0) {\n            e.preventDefault();\n            this.handleScenario(this.state.scenario - 1 < 0 ? this.state.scenarios.length - 1 : this.state.scenario - 1);\n        } else if (e.keyCode === 40 && this.state.scenarios.length > 0) {\n            e.preventDefault();\n            this.handleScenario(this.state.scenario + 1 < this.state.scenarios.length ? this.state.scenario + 1 : 0);\n        };\n\n    }\n\n    showUtilization(opacity) {\n        let linkTraffic = new Array(this.state.graph.links.length).fill(0);\n        for (let i = 0; i <= linkTraffic.length - 1; i++) {\n            Object.values(this.state.flows).forEach(flow => {\n                flow.tunnels.forEach(tunnel => {\n                    tunnel.links.forEach(link => {\n                        if (link.index === i) { linkTraffic[i] += tunnel.weight * flow.demand * flow.permissable }\n                    })\n                })\n            })\n        }\n\n        for (let i = 0; i <= linkTraffic.length - 1; i++) {\n            let linklabel = d3.selectAll(\".aEnd\").filter(function (c, j) { return (j === i)});\n            linklabel.html(`${Math.round((linkTraffic[i] / linklabel.data()[0].capacity) * 10000) / 100}%`);\n            if (linkTraffic[i] / linklabel.data()[0].capacity > 1) {\n                linklabel.style(\"fill\", \"red\")\n            } else {\n                linklabel.style(\"fill\", \"black\")\n            }\n\n        }\n\n        this.setState({\n            linkTraffic: linkTraffic,\n            showUtilization: opacity,\n        }, this.updateGraph);\n    }\n\n    limitTraffic(bool) {\n        let flows = this.state.flows;\n        let permissable = bool ? 1 - this.state.var : 1;\n        Object.values(flows).forEach(flow => {\n            flow.permissable = permissable\n        })\n        this.setState({\n            limitTraffic: bool,\n            flows: flows,\n        }, this.updateGraph);\n    }\n\n    changeTunnel(tunnelIndex) {\n        let flowid = this.state.flowid;\n        let flow = this.state.flows[flowid];\n        let sent = flowid !== null ? (flow.tunnels[tunnelIndex].weight * flow.demand * flow.permissable) : 0;\n        let tunnels = flowid !== null ? flow.tunnels : [];\n        let dashLinks = flowid !== null ? tunnels[tunnelIndex].links : [];\n        let colorNodes = flowid !== null ? this.getTunnelNodes(tunnels[tunnelIndex]) : [];\n        let secondaryNodes = []\n        let secondaryTunnels = []\n        if (flowid !== null) {\n            flow.tunnels.forEach(tunnel => {\n                secondaryNodes = [...secondaryNodes, ...this.getTunnelNodes(tunnel)];\n                secondaryTunnels = [...secondaryTunnels, tunnel.links];\n            });\n        };\n        let backFlowid = this.state.backFlowid;\n        let backFlow = this.state.flows[backFlowid]\n        let sentBack = backFlowid !== null ? (backFlow.tunnels[tunnelIndex].weight * backFlow.demand) : 0;\n        this.setState({\n            tunnelIndex,\n            dashLinks,\n            colorNodes,\n            secondaryTunnels,\n            secondaryNodes,\n            tips: [\n                {\n                    id: this.state.firstSelected,\n                    line1: `Node: ${this.state.firstSelected}`,\n                    line2: `Sent: ${sent}`,\n                },\n                {\n                    id: this.state.secondSelected,\n                    line1: `Node: ${this.state.secondSelected}`,\n                    line2: `Received: ${sent}`,\n                },\n            ],\n        }, this.updateGraph);\n    }\n\n    getNodeDemand(id) {\n        let demandedFrom = 0;\n        let demandedTo = 0;\n        Object.values(this.state.flows).forEach(flow => {\n            if (id === flow.src) { demandedFrom += this.state.demand[flow.id] }\n            if (id === flow.dst) { demandedTo += this.state.demand[flow.id] }\n        });\n        return [demandedTo, demandedFrom]\n    }\n\n    click(d) {\n      if(this.state.numSelected === 0 || this.state.numSelected === 2) {\n        // document.removeEventListener(\"keydown\", this.arrowPress, false);\n        let [demandedTo, demandedFrom] = this.getNodeDemand(d.id);\n        this.setState({\n            numSelected: 1,\n            firstSelected: d.id,\n            secondSelected: null,\n            showPaths: false,\n            dashLinks: [],\n            colorNodes: [],\n            tips: [\n                {\n                    id: d.id,\n                    line1: `Sent: ${demandedFrom}`,\n                    line2: `Received ${demandedTo}`,\n                }\n            ],\n        }, this.updateGraph);\n      } else if (this.state.numSelected === 1) {\n        if (this.state.firstSelected === d.id) {\n            this.setState({\n                numSelected: 0,\n                firstSelected: null,\n                secondSelected: null,\n                tips: [],\n                showPaths: false,\n                colorNodes: [],\n                dashLinks: [],\n            }, this.updateGraph);\n        } else {\n            let flow = this.getFlow(this.state.firstSelected, d.id);\n            let backFlow = this.getFlow(d.id, this.state.firstSelected);\n            this.setState({\n                numSelected: 2,\n                secondSelected: d.id,\n                showPaths: true,\n                flowid: flow ? flow.id : null,\n                backFlowid: backFlow ? backFlow.id : null,\n            }, () => { this.changeTunnel(0) })\n        }\n      }\n    }\n\n    drawGraph(topology) {\n        document.addEventListener(\"keydown\", this.arrowPress, false);\n        var simulation = d3.forceSimulation()\n            .force(\"link\", d3\n                .forceLink().id(function(d) { return d.id; })\n                .distance(function (d) {\n                    return 100;\n                })\n            )\n            .force(\"charge\", d3.forceManyBody().strength(-500))\n            .force(\"center\", d3.forceCenter(this.svg.getBoundingClientRect().width / 2, this.svg.getBoundingClientRect().height / 2));\n\n\n        this.setState({\n            simulation: simulation,\n        }, () => {\n            const svg = d3.select(this.svg);\n            svg.append('defs').append('marker')\n                .attr('id', 'arrowhead')\n                .attr('viewBox', '-0 -5 10 10')\n                .attr('refX', 13)\n                .attr('refY', 0)\n                .attr('orient', 'auto')\n                .attr('markerWidth', 3)\n                .attr('markerHeight', 13)\n                .attr('xoverflow', 'visible')\n                .append('svg:path')\n                .attr('d', 'M 0,-5 L 10 ,0 L 0,5')\n                .attr('fill', '#999')\n                .style('stroke','none');\n\n            d3.json(`./data/${topology}.json`)\n              .then((graph, error) => {\n              if (error) throw error;\n              this.setState({\n                ...this.state,\n                graph: graph,\n              })\n\n              graph.links.forEach((link, i) => {\n                  link.capacity = this.state.capacity[i]\n              })\n              var linkg = svg.append(\"g\")\n                .attr(\"class\", \"links\")\n                .selectAll(\"line\")\n                .data(graph.links)\n                .enter()\n                .append(\"g\")\n                .attr(\"class\", \"link\")\n\n\n              var link = linkg\n                .append(\"line\")\n                .attr(\"class\", \"link-line\")\n\n              var labelLine = svg.selectAll(\".link\")\n                .append(\"text\")\n                .attr('class', 'aEnd')\n                .data(graph.links)\n                .attr('x', function(d) { return d.source.x; })\n                .attr('y', function(d) { return d.source.y; })\n                .attr('text-anchor', 'middle')\n                .style(\"font-size\", \"10px\")\n                .style(\"opacity\", 0)\n                .text(\"yo\");\n\n              var div = d3.select(\"body\").append(\"div\")\n                .attr(\"class\", \"tooltip\")\n                .style(\"opacity\", 0);\n\n            // var edgepaths = svg.selectAll(\".edgepath\")\n            //     .data(graph.links)\n            //     .enter()\n            //     .append('path')\n            //     .attrs({'d': function(d) {return 'M '+d.source.x+' '+d.source.y+' L '+ d.target.x +' '+d.target.y},\n            //            'class':'edgepath',\n            //            'fill-opacity':0,\n            //            'stroke-opacity':0,\n            //            'fill':'blue',\n            //            'stroke':'red',\n            //            'id':function(d,i) {return 'edgepath'+i}})\n            //     .style(\"pointer-events\", \"none\");\n\n            // var edgelabels = svg.selectAll(\".edgelabel\")\n            //     .data(graph.links)\n            //     .enter()\n            //     .append('text')\n            //     .style(\"pointer-events\", \"none\")\n            //     .attrs({'class':'edgelabel',\n            //            'id':function(d,i){return 'edgelabel'+i},\n            //            'dx':80,\n            //            'dy':0,\n            //            'font-size':10,\n            //            'fill':'#aaa'});\n\n            // edgelabels.append('textPath')\n            //     .attr('xlink:href',function(d,i) {return '#edgepath'+i})\n            //     .style(\"pointer-events\", \"none\")\n            //     .text(function(d,i){return 'label '+i});\n\n              var node = svg.append(\"g\")\n                .attr(\"class\", \"nodes\")\n                .selectAll(\"circle\")\n                .data(graph.nodes)\n                .enter()\n                .append('g').attr(\"class\", \"wrapper\")\n                  .attr(\"width\", 10)\n                  .attr(\"height\", 10)\n                  .on(\"click\", this.click)\n                  .call(d3.drag()\n                      .on(\"start\", this.dragstarted)\n                      .on(\"drag\", this.dragged)\n                      .on(\"end\", this.dragended));\n\n              var circle = node.append(\"circle\")\n                  .attr(\"r\", 14)\n\n              node.append(\"text\")\n                .text(function (d) { return d.id; })\n                .style(\"text-anchor\", \"middle\")\n                .style(\"fill\", \"#999\")\n                .style(\"cursor\", \"pointer\")\n                .style(\"font-size\", 18)\n                .attr(\"transform\", function(d) {\n                  return \"translate(\" + 0 + \",\" + 6+ \")\"\n                });\n\n              node.append(\"title\")\n                  .text(function(d) { return d.id; });\n\n              //add tooltip\n              let that = this;\n              svg.selectAll(\"line\")\n                  .on(\"mouseover\", function(d) {\n                      div.transition()\n                          .duration(200)\n                          .style(\"opacity\", .9);\n                      div.html(\"<i>p</i> = \" + Math.round(that.state.failure_probabilities[d.index]*10000000)/100000 + \"&#37;\") //+ \"<br/>\"  + d.close\n                          .style(\"width\", \"90px\")\n                          .style(\"left\", (d3.event.pageX) + \"px\")\n                          .style(\"top\", (d3.event.pageY - 28) + \"px\");\n                      })\n                  .on(\"mouseout\", function(d) {\n                      div.transition()\n                          .duration(200)\n                          .style(\"opacity\", 0);\n                      });\n\n              this.state.simulation\n                  .nodes(graph.nodes)\n                  .on(\"tick\", ticked)\n\n              this.state.simulation.force(\"link\")\n                  .links(graph.links);\n\n              function xpos(s, t) {\n                  var angle = Math.atan2(t.y - s.y, t.x - s.x);\n                  return 30 * Math.cos(angle) + s.x;\n              };\n\n              function ypos(s, t) {\n                  var angle = Math.atan2(t.y - s.y, t.x - s.x);\n                  return 30 * Math.sin(angle) + s.y;\n              };\n\n\n              function ticked() {\n                link\n                    .attr(\"x1\", function(d) { return d.source.x; })\n                    .attr(\"y1\", function(d) { return d.source.y; })\n                    .attr(\"x2\", function(d) { return d.target.x; })\n                    .attr(\"y2\", function(d) { return d.target.y; });\n\n                svg.selectAll('text.aEnd')\n                    .attr('x', function(d) { return xpos(d.source, d.target); })\n                    .attr('y', function(d) { return ypos(d.source, d.target); });\n\n                svg.selectAll('text.zEnd')\n                    .attr('x', function(d) { return xpos(d.target, d.source); })\n                    .attr('y', function(d) { return ypos(d.target, d.source); });\n\n                // labelLine.attr('transform',function(d,i){\n                //     if (d.target.x<d.source.x){\n                //         let bbox = this.getBBox();\n                //         let rx = bbox.x+bbox.width/2;\n                //         let ry = bbox.y+bbox.height/2;\n                //         return 'rotate(180 '+ rx+' '+ ry+')';\n                //         }\n                //     else {\n                //         return 'rotate(0)';\n                //         }\n                // });\n\n                // edgepaths.attr('d', function(d) { var path='M '+d.source.x+' '+d.source.y+' L '+ d.target.x +' '+d.target.y;\n                //                                    //console.log(d)\n                //                                    return path});\n\n                // edgelabels.attr('transform',function(d,i){\n                //     if (d.target.x<d.source.x){\n                //         let bbox = this.getBBox();\n                //         let rx = bbox.x+bbox.width/2;\n                //         let ry = bbox.y+bbox.height/2;\n                //         return 'rotate(180 '+rx+' '+ry+')';\n                //         }\n                //     else {\n                //         return 'rotate(0)';\n                //         }\n                // });\n\n                node.attr(\"transform\", function(d) {\n                  return \"translate(\" + d.x + \",\" + d.y + \")\"\n                });\n              }\n            });\n        })\n    }\n\n  render() {\n    // let links = [];\n    // if (this.state.graph) {\n    //     links = this.state.graph.links.map(link => {\n    //         return <line className=\"link\" x=\"100\" y=\"100\"/>\n    //     })\n    //     console.log(d3.select(\"line\"))\n    // }\n    let path_info;\n    if (this.state.flowid) {\n        path_info = this.state.flows[this.state.flowid].tunnels.map((tunnel, i) => {\n            return <tr className={i === this.state.tunnelIndex ? \"selected\" : \"\"} key={i}>\n                        <td x=\"0\">Tunnel {i}</td>\n                        <td x=\"50\">{tunnel.weight}</td>\n                        <td x=\"80\">{tunnel.availability}</td>\n                    </tr>\n        })\n    }\n\n    let limitButton = this.state.limitTraffic ?\n                            <div id=\"limitButton\" onClick={() => this.limitTraffic(false)}>Unlimit</div> :\n                            <div id=\"limitButton\" onClick={() => this.limitTraffic(true)}>Limit</div>\n\n    let utilizationButton = this.state.showUtilization === 0 ?\n                            <div id=\"utilizationButton\" onClick={() => this.showUtilization(.6)}>Utilization</div> :\n                            <div id=\"utilizationButton\" onClick={() => this.showUtilization(0)}>Off</div>\n\n    let key = 0;\n    let demand = [];\n    let sentDemand = [];\n    let satisfied = [];\n    let thead = [];\n    let demandRows = [];\n    let sentRows = [];\n    let satisfiedRows = [];\n    let totalSatisfied = 0;\n    let totalDemand = 0;\n\n    let sentTraffic = this.state.graph ? new Array(this.state.graph.links.length).fill(0) : [];\n    for (let i = 1; i <= parseInt(this.state.num_nodes); i++) {\n        thead.push(<th className=\"border-bottom\" key={key++}>{i}</th>)\n        let demandRow = [];\n        let sentRow = [];\n        let satisfiedRow = [];\n        for (let j = 1; j <= parseInt(this.state.num_nodes); j++) {\n            let d = \"-\"\n            let sentDemand = 0\n            let satisfiedDemand = 0\n            Object.values(this.state.flows).forEach((flow, f) => {\n                if (flow.src === i.toString() && flow.dst === j.toString()) {\n                    d = flow.demand;\n                    flow.tunnels.forEach((tunnel, t) => {\n                        sentDemand += tunnel.sent\n                        let congested = false;\n                        tunnel.links.forEach(link => {\n                            let ls = this.state.graph.links.filter((l, index) => index === link.index);\n                            if (ls[0] && sentTraffic[link.index] >= ls[0].capacity) {\n                                congested = true;\n                                console.log(\"CONGESTION\")\n                            } else {\n\n                            }\n                        })\n                        if (!congested) {\n                            tunnel.links.forEach(link => {\n                                sentTraffic[link.index] += tunnel.weight * flow.demand * flow.permissable;\n                            });\n                            satisfiedDemand += tunnel.weight * flow.demand * flow.permissable;\n                        }\n                    })\n                }\n            })\n            demandRow.push(<td>{d === \"-\" ? d : Math.round(d * 100)/100}</td>)\n            sentRow.push(<td>{sentDemand === 0 ? \"-\" : Math.round(satisfiedDemand * 100)/100}</td>)\n            satisfiedRow.push(<td>{d === \"-\" ? 0 : `${Math.round((satisfiedDemand * 100)/ d)}%`}</td>)\n            totalSatisfied += satisfiedDemand;\n            totalDemand += d === \"-\" ? 0 : d;\n        }\n        demandRows.push(<tr key={key++}><th className=\"border-right\">{i}</th>{demandRow}</tr>)\n        sentRows.push(<tr key={key++}><th className=\"border-right\">{i}</th>{sentRow}</tr>)\n        satisfiedRows.push(<tr key={key++}><th className=\"border-right\">{i}</th>{satisfiedRow}</tr>)\n\n    }\n    demand.push(<tr key={key++}><th></th>{thead}</tr>)\n    demand.push(demandRows)\n    sentDemand.push(<tr key={key++}><th></th>{thead}</tr>)\n    sentDemand.push(sentRows)\n    satisfied.push(<tr key={key++}><th></th>{thead}</tr>)\n    satisfied.push(satisfiedRows)\n\n    let scenarios;\n    if (this.state.scenarios && this.state.scenarioSatisfaction) {\n        scenarios = this.state.scenarios.map((scenario, i) => {\n            return (<option\n                    key={i}\n                    value={i}>{`Scenario ${i} (${Math.round(this.state.probabilities[i] * 1000000) / 10000}%)\n                                (${Math.round((this.state.scenarioSatisfaction[i]) * 1000000) / 10000})`}\n                    </option>)\n        })\n    }\n\n    let cvar;\n    if (this.state.cvar) {\n        cvar = (<tbody>\n                    <tr>\n                        <th className=\"border-bottom\" style={{\"paddingLeft\": \"10px\"}}>VAR</th>\n                        <th className=\"border-bottom\">CVAR</th>\n                    </tr>\n                    <tr>\n                        <td style={{\"paddingLeft\": \"20px\"}}>{this.state.var}</td>\n                        <td>{`${Math.round(this.state.cvar * 1000000) / 10000}%`}</td>\n                    </tr>\n                </tbody>)\n    }\n\n    return (\n      <StyledResults>\n          <SVG\n            ref={svg => this.svg = svg}\n          >\n            {/**<g className=\"l\">\n                { links }\n            </g>**/}\n            <foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" pointerEvents=\"none\">\n                { limitButton }\n            </foreignObject>\n            <foreignObject x=\"7\" y=\"7\" width=\"100%\" height=\"100%\" pointerEvents=\"none\">\n                { utilizationButton }\n            </foreignObject>\n            <foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" pointerEvents=\"none\">\n                <select onChange={e => this.handleScenario(e.target.value)} value={this.state.scenario}>\n                    { scenarios }\n                </select>\n            </foreignObject>\n            {this.state.showPaths &&\n                <foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" pointerEvents=\"none\" style={{\"padding\": \"14px\"}}>\n                  <PathTable>\n                    <tbody>\n                        <tr>\n                            <th></th>\n                            <th>weight</th>\n                            <th>availability</th>\n                        </tr>\n                        { path_info }\n                    </tbody>\n                  </PathTable>\n                </foreignObject>\n            }\n          </SVG>\n          <div className=\"tableTitle\">Demand</div>\n          <OuterTable>\n            <tbody>\n                { demand }\n            </tbody>\n          </OuterTable>\n          <div className=\"tableTitle\">Successful Demand</div>\n          <OuterTable>\n            <tbody>\n                { sentDemand }\n            </tbody>\n          </OuterTable>\n          <div className=\"tableTitle\">Satisfied Demand</div>\n          <OuterTable>\n            <tbody>\n                { satisfied }\n            </tbody>\n          </OuterTable>\n          <div className=\"tableTitle\">Loss</div>\n          <OuterTable>\n                { cvar }\n          </OuterTable>\n      </StyledResults>\n\n    )\n  }\n}\n\nexport default ForceGraph;\n","import React, { Component } from 'react';\nimport Header from './Header';\nimport TEInputs from './TEInputs';\nimport StockInputs from './StockInputs';\nimport TEOutputs from './TEOutputs';\nimport Login from './Login';\nimport StockOutputs from './StockOutputs';\nimport ForceGraph from './ForceGraph';\n\nimport styled from 'styled-components';\nimport './style.css';\n\nconst TESection = styled.div`\n    width: 100vw;\n    height: 70vh;\n\n    #inputs {\n        text-align: center;\n        padding-top: 40px;\n        width: 100%;\n    }\n    #graph {\n        background-color: #EEE;\n        margin-top: 20px;\n        border: 1px solid gray;\n        height: 80vh;\n        width: 90%;\n        margin-left: auto;\n        margin-right: auto;\n    }\n`;\n\nconst StyledError = styled.div`\n    background-color: #CCC\n    padding: 20px;\n    text-align: center;\n    transition: .1s all;\n\n    &:hover {\n        background-color: #999;\n        cursor: pointer;\n    }\n`;\n\nclass App extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            login: false,\n            te: {\n                inputs: {\n                    topology: \"Custom\",\n                    demand: \"1\",\n                    path: \"SMORE\",\n                    beta: \".9\",\n                    cutoff: \".0001\",\n                    k: \"4\",\n                    downscale_demand: \"1000\",\n                    zeroindex: \"false\",\n                    demand_matrix: \"true\",\n                    num_nodes: 0,\n                },\n                results: {\n                    var: 0,\n                    cvar: 0,\n                    allocation: [],\n                    flows: [],\n                    capacity: [],\n                    T: [],\n                    Tf: [],\n                    links: [],\n                },\n                show_results: false,\n            },\n            stocks: {\n                inputs: {\n                    tickers: [\n                        \"\"\n                    ],\n                    beta: .9,\n                    roi: 50,\n                    target: 40,\n                    days: 800,\n                    budget: 1000,\n                    KEYS: [\"F6JGTHROSNY4A8MV\", \"EGZPCEQOXI85VKRT\", \"ASDPVYC2XRAJJ81K\", \"M4XW13HI1CWYH0KN\"],\n                    key: 0,\n                },\n                results: {\n\n                },\n                show_results: false,\n            },\n            error: \"\",\n            mode: \"TE\",\n        };\n        this.setMode = this.setMode.bind(this);\n        this.login = this.login.bind(this);\n        this.removeError = this.removeError.bind(this);\n        this.handleTESubmit = this.handleTESubmit.bind(this);\n        this.handleTEInput = this.handleTEInput.bind(this);\n        this.handleStockInput = this.handleStockInput.bind(this);\n        this.handleTickerValue = this.handleTickerValue.bind(this);\n        this.handleAddTicker = this.handleAddTicker.bind(this);\n        this.handleTickerSubmit = this.handleTickerSubmit.bind(this);\n    }\n\n    setMode(mode) {\n        this.setState({\n            ...this.state,\n            mode: mode,\n        });\n    }\n\n    removeError() {\n        this.setState({\n            ...this.state,\n            error: \"\",\n        });\n    }\n\n    login(password) {\n        if (password === \"CVaR2019!\") {\n            this.setState({\n                ...this.state,\n                login: true,\n            });       \n        };\n    }\n\n    ////////////////////////////////////////////////////////////////////\n    /////////////////////////// Stock Methods //////////////////////////\n    ////////////////////////////////////////////////////////////////////\n    handleStockInput(value, type) {\n        this.setState({\n            ...this.state,\n            stocks: {\n                ...this.state.stocks,\n                inputs: {\n                    ...this.state.stocks.inputs,\n                    [type]: value,\n                },\n                show_results: false,\n            }\n        })\n    }\n\n    handleTickerValue(value, num) {\n        let newtickers = this.state.stocks.inputs.tickers;\n        newtickers[num] = value;\n        this.setState({\n            ...this.state,\n            stocks: {\n                inputs: {\n                    ...this.state.stocks.inputs,\n                    tickers: newtickers,\n                },\n                show_results: false,\n            },\n        })\n        // fetch(`https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=${value}&apikey=${this.state.stocks.inputs.KEY}`, {\n        //   method: \"GET\",\n        //   mode: \"cors\"\n        // }).then(res => {\n        //     console.log(res);\n        //     return res.json();\n        // })\n        // .then(data => {\n        //     console.log(data.bestMatches);\n        //     this.setState({\n        //         stocks: {\n        //             ...this.state.stocks,\n        //             tickerMatches: data.bestMatches,\n        //         }\n        //     }, () => {\n        //         console.log(this.state)\n        //     })\n        // })\n        // .catch(err => console.log(err))\n\n\n    }\n\n    handleAddTicker() {\n        let newtickers = this.state.stocks.inputs.tickers;\n        newtickers.push(\"\");\n        this.setState({\n            ...this.state,\n            stocks: {\n                ...this.state.stocks,\n                inputs: {\n                    ...this.state.stocks.inputs,\n                    tickers: newtickers,\n                },\n                show_results: false,\n            },\n        })\n    }\n\n    handleTickerSubmit() {\n        let returns = [];\n        let ticker_ordered = [];\n        console.log(this.state.stocks.inputs.key)\n        Promise.all(\n            this.state.stocks.inputs.tickers.map(ticker => {\n                return new Promise((resolve, reject) => {\n                    fetch(`https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${ticker}&outputsize=full&apikey=${this.state.stocks.inputs.KEYS[this.state.stocks.inputs.key]}`, {\n                      method: \"GET\",\n                      mode: \"cors\"\n                    }).then(res => res.json())\n                    .then(data => {\n                        let daily_returns = []\n                        let daily_data = data[\"Time Series (Daily)\"];\n                        let close = \"4. close\";\n                        let days = Object.keys(daily_data);\n                        let last = daily_data[days[this.state.stocks.inputs.days + 1]][close]\n                        for (let i = this.state.stocks.inputs.days; i >= 0; i--) {\n                            let curr = daily_data[days[i]][close];\n                            daily_returns.push((curr - last) / last);\n                            last = curr;\n                        }\n                        returns.push(daily_returns);\n                        ticker_ordered.push(ticker);\n                        resolve();\n                    })\n                    .catch(error => {\n                        reject(error);\n                    });\n                })\n            })\n        )\n        .then(() => {\n            console.log({\n                \"nstocks\": this.state.stocks.inputs.tickers.length,\n                \"returns\": returns,\n                \"beta\": this.state.stocks.inputs.beta,\n                \"ticker_ordered\": ticker_ordered,\n              })\n            // var url = 'http://localhost:8080/api/cvarf';\n            var url = 'http://128.30.92.156:8080/api/cvarf';\n            fetch(url, {\n              method: \"POST\",\n              mode: \"cors\",\n              body: JSON.stringify({\n                \"nstocks\": this.state.stocks.inputs.tickers.length,\n                \"returns\": returns,\n                \"beta\": parseFloat(this.state.stocks.inputs.beta),\n                \"roi\": parseFloat(this.state.stocks.inputs.roi/this.state.stocks.inputs.budget),\n                \"target\": parseFloat(this.state.stocks.inputs.target/this.state.stocks.inputs.budget),\n              }),\n              headers:{\n                'Content-Type': 'application/json'\n              }\n            }).then(res => res.json())\n            .then(response => {\n                this.setState({\n                    ...this.state,\n                    stocks: {\n                        ...this.state.stocks,\n                        results: response,\n                        show_results: true,\n                        tickers: ticker_ordered,\n                    },\n                })\n            })\n            .catch(error => console.error('Error:', error));\n        })\n        .catch(error => {\n            console.log(error);\n            let oldkey = this.state.stocks.inputs.key;\n            let newkey = this.state.stocks.inputs.key+1 >= this.state.stocks.inputs.KEYS.length ? 0 : this.state.stocks.inputs.key+1\n            this.setState({\n                ...this.state,\n                stocks: {\n                    ...this.state.stocks,\n                    inputs: {\n                        ...this.state.stocks.inputs,\n                        key: newkey,\n                    },\n                },\n                error: {\n                    error: error,\n                    message: `API error with key ${oldkey}...`,\n                }\n            })\n        });\n    }\n\n    ////////////////////////////////////////////////////////////////////\n    /////////////////////////// TE Methods /////////////////////////////\n    ////////////////////////////////////////////////////////////////////\n    handleTEInput(value, type) {\n        console.log(this.state.te.inputs)\n        this.setState({\n            ...this.state,\n            te: {\n                ...this.state.te,\n                inputs: {\n                    ...this.state.te.inputs,\n                    [type]: value,\n                },\n                show_results: false,\n            }\n        })\n    }\n\n    handleTESubmit() {\n        // var url = 'http://localhost:8080/api/teavar';\n        var url = 'http://128.30.92.156:8080/api/teavar';\n\n        let data = {\n            topology: this.state.te.inputs.topology,\n            demand: this.state.te.inputs.demand,\n            path: this.state.te.inputs.path,\n            beta: this.state.te.inputs.beta,\n            cutoff: this.state.te.inputs.cutoff,\n        }\n        if (this.state.te.inputs.path.includes(\"ksp\")) {\n            data.k = `${this.state.te.inputs.path.split(\"_\")[1]}`;\n        } else {\n            data.k = \"4\";\n        }\n        switch (data.topology) {\n            case \"Custom\":\n                data.downscale_demand = \"1\";\n                break;\n            case \"B4\":\n                data.downscale_demand = \"1\";\n                break;\n            case \"IBM\":\n                data.downscale_demand = \"1000\";\n                break;\n            case \"Abilene\":\n                data.downscale_demand = \"1\";\n                break;\n            default:\n                data.downscale_demand = \"1000\";\n                break;\n        }\n\n        fetch(url, {\n          method: \"POST\",\n          mode: \"cors\",\n          body: JSON.stringify(data),\n          headers:{\n            'Content-Type': 'application/json'\n          }\n        }).then(res => res.json())\n        .then(response => {\n            console.log(response)\n            this.setState({\n                ...this.state,\n                te: {\n                    ...this.state.te,\n                    inputs: {\n                        ...this.state.te.inputs,\n                        num_nodes: data.num_nodes,\n                        zeroindex: data.zeroindex,\n                    },\n                    results: response,\n                    show_results: true,\n                },\n            })\n        })\n        .catch(error => console.error('Error:', error));\n    }\n\n    render() {\n        var home;\n        var header;\n        if (this.state.mode === \"TE\") {\n            header = (<Header\n                modes={[\"TE\", \"Stocks\"]}\n                mode={this.state.mode}\n                setMode={this.setMode}\n            />)\n            home = (\n                <div>\n                    <TESection>\n                        <div id=\"inputs\">\n                            <TEInputs\n                              handleTESubmit={this.handleTESubmit}\n                              handleTEInput={this.handleTEInput}>\n                            </TEInputs>\n                        </div>\n                        <div id=\"graph\">\n                            {/*<img alt=\"graph\" src={`./img/${this.state.te.inputs.topology}.png`}/>*/}\n                            <ForceGraph\n                                topology={this.state.te.inputs.topology}\n                                num_nodes={this.state.te.results.num_nodes}\n                                capacity={this.state.te.results.capacity}\n                                failure_probabilities={this.state.te.results.failure_probabilities}\n                                T={this.state.te.results.T}\n                                Tf={this.state.te.results.Tf}\n                                links={this.state.te.results.links}\n                                flows={this.state.te.results.flows}\n                                allocation={this.state.te.results.allocation}\n                                demand={this.state.te.results.demand}\n                                probabilities={this.state.te.results.probabilities}\n                                scenarios={this.state.te.results.scenarios}\n                                X={this.state.te.results.X}\n                                var={this.state.te.results.var}\n                                cvar={this.state.te.results.cvar}\n                            />\n                        </div>\n                    </TESection>\n                    {/**this.state.te.show_results &&\n                        <TEOutputs\n                          data={this.state.te.results}\n                          num_nodes={this.state.te.inputs.num_nodes}\n                          zeroindex={this.state.te.inputs.zeroindex}\n                        />**/\n                    }\n                </div>\n            )\n        } else if (!this.state.login) {\n            home = <Login login={this.login} />\n            header = (<Header\n                modes={[\"TE\", \"Stocks\"]}\n                mode={this.state.mode}\n                setMode={this.setMode}\n            />)\n        } else  {\n            header = (<Header\n                modes={[\"TE\", \"Stocks\"]}\n                mode={this.state.mode}\n                setMode={this.setMode}\n            />)\n            home = (<div>\n                <StockInputs\n                    handleTickerValue={this.handleTickerValue}\n                    handleStockInput={this.handleStockInput}\n                    handleAddTicker={this.handleAddTicker}\n                    handleTickerSubmit={this.handleTickerSubmit}\n                    tickers={this.state.stocks.inputs.tickers}\n                    tickerMatches={this.state.stocks.tickerMatches}\n                >\n                </StockInputs>\n                {this.state.stocks.show_results &&\n                    <StockOutputs\n                    data={this.state.stocks.results}\n                    roi={parseFloat(this.state.stocks.inputs.roi)}\n                    target={parseFloat(this.state.stocks.inputs.target)}\n                    tickers={this.state.stocks.tickers}\n                    budget={parseFloat(this.state.stocks.inputs.budget)}\n                    />\n                }\n                </div>)\n        }\n        return (\n          <div>\n            { header }\n            {this.state.error !== \"\" &&\n                <StyledError onClick={this.removeError}>{this.state.error.message}</StyledError>\n            }\n            { home }\n          </div>\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}