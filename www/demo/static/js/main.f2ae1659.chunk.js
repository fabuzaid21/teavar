(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(t,e,n){t.exports=n(34)},33:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(13),s=n.n(r),o=n(11),l=n(3),c=n(6),d=n(7),u=n(9),p=n(8),h=n(10),b=n(2),f=n(4),m=n(5);function g(){var t=Object(f.a)(["\n    position: fixed;\n    height: 67px;\n    width: 100vw;\n    top: 0;\n    border-bottom: 1px solid #222;\n    box-shadow: 0 1px 0 #262626;\n    background-color: #191919;\n    background-image: -webkit-gradient(linear,left top,left bottom,from(#282828),to(#191919));\n    background-image: -webkit-linear-gradient(top,#282828,#191919);\n    background-image: linear-gradient(top,#282828,#191919);\n    background-repeat: no-repeat;\n    z-index: 10;\n\n    #left {\n        position: absolute;\n        height: 100%;\n        left: 10px;\n    }\n\n    #center {\n        position: absolute;\n        height: 100%;\n        left: 50%;\n        transform: translateX(-50%);\n        color: white;\n\n        #title {\n            font-size: 25px;\n            padding-top: 15px;\n        }\n    }\n\n    #right {\n        position: absolute;\n        height: 100%;\n        padding-top: 20px;\n        padding-right: 20px;\n        right: 10px;\n        color: white;\n\n        .link {\n            cursor: pointer;\n            &:hover {\n                border-bottom: 1px solid white;\n            }\n        }\n    }\n"]);return g=function(){return t},t}var k=m.a.div(g()),v=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this,e=this.props.modes.map(function(e,n){return t.props.mode===e?"":i.a.createElement("div",{key:n,className:"link",onClick:function(n){return t.props.setMode(e)}},e)});return i.a.createElement("div",null,i.a.createElement(k,null,i.a.createElement("div",{id:"left"}),i.a.createElement("div",{id:"center"},i.a.createElement("div",{id:"title"},"TEAVAR Demo")),i.a.createElement("div",{id:"right"},e)))}}]),e}(a.Component);function x(){var t=Object(f.a)(["\n    form {\n        margin: 10px;\n        select {\n         -webkit-appearance: button;\n         -webkit-border-radius: 2px;\n         -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n         -webkit-padding-end: 20px;\n         -webkit-padding-start: 2px;\n         -webkit-user-select: none;\n         background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);\n         background-position: 97% center;\n         background-repeat: no-repeat;\n         border: 1px solid #AAA;\n         color: #555;\n         font-size: inherit;\n         overflow: hidden;\n         padding: 5px 10px;\n         text-overflow: ellipsis;\n         white-space: nowrap;\n         width: 370px;\n        }\n    }\n    .input {\n      text-align: center;\n      width: 100%;\n      display: block;\n      height: 50px;\n\n      select {\n        border: none;\n      }\n\n      input, form {\n        font-size: 20px;\n        margin-left: 0;\n        margin-right: 0;\n        display: inline-block;\n        border-left: none;\n        border-right: 1px solid #AAA;\n        border-top: 1px solid #AAA;\n        border-bottom: 1px solid #AAA;\n        border-top-left-radius: 0px;\n        border-bottom-left-radius: 0px;\n      }\n    }\n\n    .input_label {\n      color: white;\n      display: inline-block;\n      width: 90px;\n      height: calc(100% - 29px);\n      background-color: #999;\n      vertical-align: top;\n      margin: 10px 0px;\n      padding: 6px 10px;\n      border-left: 1px solid #AAA;\n      border-top: 1px solid #AAA;\n      border-bottom: 1px solid #AAA;\n      font-size: 18px;\n    }\n\n    input {\n      position: relative;\n      display: block;\n      margin: 10px auto;\n      -webkit-appearance: button;\n      -webkit-border-radius: 2px;\n      -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n      -webkit-padding-end: 20px;\n      -webkit-padding-start: 2px;\n      -webkit-user-select: none;\n      border: 1px solid #AAA;\n      color: #555;\n      font-size: inherit;\n      overflow: hidden;\n      padding: 5px 10px;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      width: 350px;\n    }\n    button {\n      margin: 10px;\n      font-size: 20px;\n    }\n"]);return x=function(){return t},t}var y=m.a.div(x()),E=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this;return i.a.createElement("div",null,i.a.createElement(y,null,i.a.createElement("div",{className:"input"},i.a.createElement("div",{className:"input_label"},"Topology"),i.a.createElement("form",null,i.a.createElement("select",{name:"dropdown",onChange:function(e){return t.props.handleTEInput(e.target.value,"topology")}},i.a.createElement("option",{value:"Custom",default:!0},"Small Net"),i.a.createElement("option",{value:"B4"},"B4"),i.a.createElement("option",{value:"IBM"},"IBM"),i.a.createElement("option",{value:"Abilene"},"Abilene")))),i.a.createElement("div",{className:"input"},i.a.createElement("div",{className:"input_label"},"Demand"),i.a.createElement("form",null,i.a.createElement("select",{name:"dropdown",onChange:function(e){return t.props.handleTEInput(e.target.value,"demand")}},i.a.createElement("option",{value:"1",default:!0},"1"),i.a.createElement("option",{value:"2"},"2"),i.a.createElement("option",{value:"3"},"3"),i.a.createElement("option",{value:"4"},"4"),i.a.createElement("option",{value:"5"},"5"),i.a.createElement("option",{value:"6"},"6")))),i.a.createElement("div",{className:"input"},i.a.createElement("div",{className:"input_label"},"Paths"),i.a.createElement("form",null,i.a.createElement("select",{name:"dropdown",onChange:function(e){return t.props.handleTEInput(e.target.value,"path")}},i.a.createElement("option",{value:"ED",default:!0},"ED"),i.a.createElement("option",{value:"SMORE"},"Oblivious"),i.a.createElement("option",{value:"ksp_2"},"KSP_2"),i.a.createElement("option",{value:"ksp_4"},"KSP_4"),i.a.createElement("option",{value:"ksp_6"},"KSP_6")))),i.a.createElement("div",{className:"input"},i.a.createElement("div",{className:"input_label"},"Beta (%)"),i.a.createElement("input",{type:"text",placeholder:"0.9",onChange:function(e){return t.props.handleTEInput(e.target.value,"beta")}})),i.a.createElement("div",{className:"input"},i.a.createElement("div",{className:"input_label"},"Cutoff (%)"),i.a.createElement("input",{type:"text",placeholder:"0.0001",onChange:function(e){return t.props.handleTEInput(e.target.value,"cutoff")}})),i.a.createElement("button",{onClick:function(e){return t.props.handleTESubmit()}},"Submit")))}}]),e}(a.Component);function w(){var t=Object(f.a)(["\n    margin 40px auto;\n    text-align: center;\n\n    form {\n        margin: 10px;\n        select {\n         -webkit-appearance: button;\n         -webkit-border-radius: 2px;\n         -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n         -webkit-padding-end: 20px;\n         -webkit-padding-start: 2px;\n         -webkit-user-select: none;\n         background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);\n         background-position: 97% center;\n         background-repeat: no-repeat;\n         border: 1px solid #AAA;\n         color: #555;\n         font-size: inherit;\n         overflow: hidden;\n         padding: 5px 10px;\n         text-overflow: ellipsis;\n         white-space: nowrap;\n         width: 300px;\n        }\n    }\n\n\n    .input {\n      text-align: center;\n      width: 100%;\n      display: block;\n      height: 50px;\n\n      input {\n        display: inline-block;\n        border-left: none;\n        border-right: 1px solid #AAA;\n        border-top: 1px solid #AAA;\n        border-bottom: 1px solid #AAA;\n        border-top-left-radius: 0px;\n        border-bottom-left-radius: 0px;\n      }\n    }\n\n    .input_label {\n      color: white;\n      display: inline-block;\n      width: 75px;\n      height: calc(100% - 34px);\n      background-color: #999;\n      vertical-align: top;\n      margin: 10px 0px;\n      padding: 6px 10px;\n      border-left: 1px solid #AAA;\n      border-top: 1px solid #AAA;\n      border-bottom: 1px solid #AAA;\n      font-size: 14px;\n    }\n\n    input {\n      position: relative;\n      display: block;\n      margin: 10px auto;\n      -webkit-appearance: button;\n      -webkit-border-radius: 2px;\n      -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n      -webkit-padding-end: 20px;\n      -webkit-padding-start: 2px;\n      -webkit-user-select: none;\n      border: 1px solid #AAA;\n      color: #555;\n      font-size: inherit;\n      overflow: hidden;\n      padding: 5px 10px;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      width: 278px;\n    }\n    .matches {\n      position: relative;\n      top: 10px;\n    }\n    button {\n      margin: 10px;\n    }\n"]);return w=function(){return t},t}var O=m.a.div(w()),j=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t,e=this,n=this.props.tickers.map(function(t,n){return i.a.createElement("input",{key:n,type:"text",placeholder:"Ticker ".concat(n),value:t,onChange:function(t){return e.props.handleTickerValue(t.target.value,n)}})});return this.props.tickerMatches&&(t=this.props.tickerMatches.map(function(t){return i.a.createElement("div",null,t["1. symbol"])})),i.a.createElement("div",null,i.a.createElement(O,null,i.a.createElement("div",{className:"tickers_label"},"Portfolio Tickers"),n,i.a.createElement("div",null,t),i.a.createElement("button",{onClick:function(t){return e.props.handleAddTicker()}},"Add"),i.a.createElement("div",{className:"input"},i.a.createElement("div",{className:"input_label"},"Budget ($)"),i.a.createElement("input",{type:"text",placeholder:"1000",onChange:function(t){return e.props.handleStockInput(t.target.value,"budget")}})),i.a.createElement("div",{className:"input"},i.a.createElement("div",{className:"input_label"},"Return ($)"),i.a.createElement("input",{type:"text",placeholder:"50",onChange:function(t){return e.props.handleStockInput(t.target.value,"roi")}})),i.a.createElement("div",{className:"input"},i.a.createElement("div",{className:"input_label"},"Loss ($)"),i.a.createElement("input",{type:"text",placeholder:"40",onChange:function(t){return e.props.handleStockInput(t.target.value,"target")}})),i.a.createElement("button",{onClick:function(t){return e.props.handleTickerSubmit()}},"Submit")))}}]),e}(a.Component);function A(){var t=Object(f.a)(["\n  color: white;\n  background-color: #444;\n  border-radius: 10px;\n  margin: 30px auto;\n  tr {\n    border: 1px solid gray;\n    td {\n      padding: 10px;\n    }\n  }\n  .border-bottom {\n    border-bottom: 1px solid white;\n    padding: 6px 0px;\n  }\n  .border-right {\n    border-right: 1px solid white;\n    padding: 0px 6px;\n  }\n"]);return A=function(){return t},t}function S(){var t=Object(f.a)(["\n  color: white;\n"]);return S=function(){return t},t}m.a.div(S());var T=m.a.table(A());a.Component;function _(){var t=Object(f.a)(["\n    form {\n        margin: 10px;\n        select {\n         -webkit-appearance: button;\n         -webkit-border-radius: 2px;\n         -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n         -webkit-padding-end: 20px;\n         -webkit-padding-start: 2px;\n         -webkit-user-select: none;\n         background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);\n         background-position: 97% center;\n         background-repeat: no-repeat;\n         border: 1px solid #AAA;\n         color: #555;\n         font-size: inherit;\n         overflow: hidden;\n         padding: 5px 10px;\n         text-overflow: ellipsis;\n         white-space: nowrap;\n         width: 300px;\n        }\n    }\n    .input {\n      text-align: center;\n      width: 100%;\n      display: block;\n      height: 50px;\n\n      select {\n        border: none;\n      }\n\n      .input-elt {\n        font-size: 15px;\n        margin-left: 0;\n        margin-right: 0;\n        display: inline-block;\n        border-left: none;\n        border-right: 1px solid #AAA;\n        border-top: 1px solid #AAA;\n        border-bottom: 1px solid #AAA;\n        border-top-left-radius: 0px;\n        border-bottom-left-radius: 0px;\n      }\n    }\n\n    .input_label {\n      color: white;\n      display: inline-block;\n      width: 75px;\n      height: calc(100% - 34px);\n      background-color: #999;\n      vertical-align: top;\n      margin: 10px 0px;\n      padding: 6px 10px;\n      border-left: 1px solid #AAA;\n      border-top: 1px solid #AAA;\n      border-bottom: 1px solid #AAA;\n      font-size: 14px;\n    }\n\n    .input-elt {\n      position: relative;\n      display: block;\n      margin: 10px auto;\n      -webkit-appearance: button;\n      -webkit-border-radius: 2px;\n      -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n      -webkit-padding-end: 20px;\n      -webkit-padding-start: 2px;\n      -webkit-user-select: none;\n      border: 1px solid #AAA;\n      color: #555;\n      font-size: inherit;\n      overflow: hidden;\n      padding: 5px 10px;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      width: 278px;\n    }\n    .button {\n        color: white;\n        display: block;\n        width: 75px;\n        background-color: #999;\n        vertical-align: top;\n        margin: 10px auto;\n        padding: 6px 10px;\n        border-left: 1px solid #AAA;\n        border-top: 1px solid #AAA;\n        border-bottom: 1px solid #AAA;\n        font-size: 14px;\n        border-radius: 5px;\n    }\n"]);return _=function(){return t},t}function N(){var t=Object(f.a)(["\n    margin-top: 30vh;\n"]);return N=function(){return t},t}var C=m.a.div(N()),M=m.a.div(_()),z=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(p.a)(e).call(this,t))).state={password:""},n}return Object(h.a)(e,t),Object(d.a)(e,[{key:"handlePassword",value:function(t){this.setState({password:t})}},{key:"render",value:function(){var t=this;return i.a.createElement(C,null,i.a.createElement(M,{id:"login-window"},i.a.createElement("form",{className:"input"},i.a.createElement("input",{className:"input-elt",type:"password",placeholder:"",onChange:function(e){return t.handlePassword(e.target.value)}}),i.a.createElement("input",{className:"button",type:"submit",onClick:function(e){return t.props.login(t.state.password)},value:"Login"}))))}}]),e}(a.Component),I=n(1);function F(){var t=Object(f.a)(["\n    border: 1px solid gray;\n    background-color: rgba(255, 255, 255, .2);\n    margin: 10px auto;\n    margin-top: 70px;\n\n    th {\n        padding: 3px 10px;\n    }\n\n    td {\n        padding: 5px 10px;\n        text-align: center;\n    }\n\n    .selected {\n        background-color: rgba(200, 200, 200, .6);\n    }\n"]);return F=function(){return t},t}function L(){var t=Object(f.a)(["\n    border: 1px solid gray;\n    background-color: rgba(255, 255, 255, .2);\n    margin: 0px auto;\n    th {\n        padding: 3px 10px;\n    }\n\n    td {\n        padding: 5px 10px;\n        text-align: center;\n    }\n\n    .selected {\n        background-color: rgba(200, 200, 200, .6);\n    }\n"]);return L=function(){return t},t}function B(){var t=Object(f.a)(["\n  display: block;\n  margin: -60px auto 0px auto;\n  height: 700px;\n  width: 900px;\n"]);return B=function(){return t},t}function P(){var t=Object(f.a)(["\n    position: relative;\n    svg {\n        font-family: Sans-Serif, Arial;\n    }\n    .line {\n      stroke-width: 4;\n      fill: none;\n    }\n\n    .axis path {\n      stroke: black;\n    }\n\n    .text {\n      font-size: 12px;\n    }\n\n    .title-text {\n      font-size: 12px;\n    }\n\n    #all-statements {\n      display: block;\n      width: 100%;\n      border-bottom: 1px solid black;\n    }\n\n    #statement-table {\n      background-color: #EEE;\n      margin-top: 10px;\n    }\n\n    #statements {\n      width: 40%;\n      margin: 0px auto;\n      margin-bottom: 70px;\n      background-color: #EEE;\n      padding: 20px;\n      border-radius: 5px;\n      font-size: 18px;\n      text-align:center;\n\n      div {\n        margin: 20px 0px;\n      }\n      .colorGreen {\n        color: rgb(0,150,0);\n      }\n      .colorRed {\n        color: rgb(150, 0,0);\n      }\n    }\n"]);return P=function(){return t},t}var D=m.a.div(P()),R=m.a.svg(B()),G=m.a.table(L()),U=m.a.table(F()),V=function(t){function e(t){var n;return Object(c.a)(this,e),n=Object(u.a)(this,Object(p.a)(e).call(this,t)),console.log(t),n.state={beta:t.data.optimal_b,roi:t.roi/t.budget,cvar:t.data.optimal_cvar,var:t.data.optimal_var,a:t.data.optimal_a,budget:t.budget,selected:{allocation:t.data.optimal_a,var:t.data.optimal_var,cvar:t.data.optimal_cvar,gain:t.roi/t.budget,name:"test_"+t.data.optimal_b,id:-1}},n.drawGraph=n.drawGraph.bind(Object(b.a)(Object(b.a)(n))),n.selectLine=n.selectLine.bind(Object(b.a)(Object(b.a)(n))),n.highlightCircles=n.highlightCircles.bind(Object(b.a)(Object(b.a)(n))),n}return Object(h.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){this.drawGraph(this.props.data)}},{key:"componentWillReceiveProps",value:function(t){console.log(t),this.setState({beta:t.data.optimal_b,roi:t.roi/t.budget,cvar:t.data.optimal_cvar,var:t.data.optimal_var,budget:t.budget,a:t.data.optimal_a,selected:{allocation:t.data.optimal_a,var:t.data.optimal_var,cvar:t.data.optimal_cvar,gain:t.roi/t.budget,name:"test_"+t.data.optimal_b}}),this.drawGraph(t.data)}},{key:"selectLine",value:function(t){var e=this;console.log(t),this.setState({selected:t},function(){e.highlightCircles()})}},{key:"highlightCircles",value:function(){var t=this;if(I.s("circle").style("opacity",.5),I.s("circle").attr("r",6),this.state.selected){var e=I.s("circle").filter(function(e,n){return e.id===t.state.selected.id});e.style("opacity",1),e.attr("r",8)}}},{key:"drawGraph",value:function(t){console.log(t);var e=t.beta,n=t.gains,a=0,i=e.map(function(e,i){var r=n.map(function(n,r){return{gain:n,cvar:t.cvar[i][r],var:t.var[i][r],allocation:t.allocation[i][r],name:"test_"+e,line_id:i,point_id:r,id:a++}});return{name:"Beta="+e,values:r,beta:e,id:i}}),r=i.length;i.push({name:"Beta="+t.optimal_b,beta:t.optimal_b,id:a++,values:[{gain:this.props.roi/this.props.budget,cvar:t.optimal_cvar,var:t.optimal_var,allocation:t.optimal_a,name:"test_"+t.optimal_b,line_id:r+1,point_id:-1,id:-1}]}),console.log(i);var s=I.o().domain(I.e(i[0].values,function(t){return t.gain})).range([0,700]),o=t.cvar;o.push([t.optimal_cvar]);var l=I.o().domain([I.n(o.map(function(t){return I.n(t,function(t){return t})}),function(t){return t}),I.m(o.map(function(t){return I.m(t,function(t){return t})}),function(t){return t})]).range([500,0]),c=I.p(I.q),d=I.r(this.svg).append("g").attr("height","700px").attr("width","900px").attr("transform","translate(".concat(100,", ").concat(100,")"));d.append("text").attr("class","title-text").attr("text-anchor","middle").attr("x",350).attr("y",5);var u=I.l().x(function(t){return s(t.gain)}).y(function(t){return l(t.cvar)}),p=d.append("g").attr("class","lines"),h=this.highlightCircles;p.selectAll(".line-group").data(i).enter().append("g").attr("class","line-group").append("path").attr("class","line").attr("d",function(t){return u(t.values)}).style("stroke",function(t,e){return c(e)}).style("opacity","0.25").on("mouseover",function(t,e){I.s(".line").style("opacity","0.1"),I.s("circle").filter(function(e,n){return e.line_id===t.id}).attr("opacity",1),I.r(this).style("opacity","0.6").style("stroke-width","4px").style("cursor","pointer")}).on("mouseout",function(t){h(),I.r(this).style("opacity","0.25").style("stroke-width","4px").style("cursor","pointer")}),p.selectAll("circle-group").data(i).enter().append("g").attr("id",function(t,e){return"circle-group-".concat(e)}).attr("class","circle-group").style("fill",function(t,e){return c(e)}).selectAll("circle").data(function(t){return t.values}).enter().append("g").attr("class","circle").attr("id",function(t,e){return"circle-".concat(e)}).on("click",this.selectLine).append("circle").attr("cx",function(t){return s(t.gain)}).attr("cy",function(t){return l(t.cvar)}).attr("r",6).style("opacity","0.85").on("mouseover",function(t,e){I.s("circle").filter(function(e,n){return e.id===t.id}).attr("r",8)}).on("mouseout",function(t){I.s("circle").filter(function(e,n){return e.id===t.id}).attr("r",6),h()}),I.s(".circle-group").append("text").attr("class","text").text(function(t){return t.name}).attr("x",function(t){return s(t.values[0].gain)+20}).attr("y",function(t){return l(t.values[0].cvar)});var b=I.j(".3p"),f=I.a(s).ticks(5).tickFormat(b),m=I.b(l).ticks(5).tickFormat(b);d.append("g").attr("class","x axis").attr("transform","translate(0, ".concat(500,")")).call(f).append("text").attr("x",350).attr("y","45").attr("text-anchor","middle").attr("fill","#000").attr("font-size","18px").text("Return on Investment (%)"),d.append("g").attr("class","y axis").attr("dy","1em").call(m).append("text").attr("y",-50).attr("x",-250).attr("text-anchor","middle").attr("transform","rotate(-90)").attr("fill","#000").attr("font-size","18px").text("Conditional Value at Risk (%)"),this.highlightCircles()}},{key:"render",value:function(){var t,e,n=this,a=[],r=[];return this.state.a.forEach(function(t,e){a.push(i.a.createElement("th",{x:"0"},n.props.tickers[e])),r.push(i.a.createElement("td",{x:"0"},"$",Math.round(100*t*n.state.budget)/100))}),this.state.selected&&(e=i.a.createElement("tr",null,i.a.createElement("td",{x:"0"},Math.round(1e5*this.state.selected.var)/1e3,"%"),i.a.createElement("td",{x:"50"},Math.round(1e5*this.state.selected.cvar)/1e3,"%"),i.a.createElement("td",{x:"50"},Math.round(1e5*this.state.selected.gain)/1e3,"%")),t=this.state.selected.allocation.map(function(t,e){return i.a.createElement("tr",{key:e},i.a.createElement("td",{x:"0"},n.props.tickers[e]),i.a.createElement("td",{x:"50"},Math.round(1e5*t)/1e3,"%"))})),console.log(this.state),i.a.createElement(D,null,i.a.createElement("div",{id:"all-statements"},i.a.createElement(U,{id:"statement-table"},i.a.createElement("tbody",null,i.a.createElement("tr",null,a),i.a.createElement("tr",null,r))),i.a.createElement("div",{id:"statements"},i.a.createElement("div",null,"Your gain is",i.a.createElement("span",{className:"colorGreen"}," ",Math.round(100*this.state.roi*this.state.budget)/100,"$ "),"return on invesment"),i.a.createElement("div",null,"Your loss is no less than",i.a.createElement("span",{className:"colorRed"}," ",Math.round(100*this.state.var*this.state.budget)/100,"$ "),"with probability",i.a.createElement("span",{className:"colorGreen"}," ",Math.round(1e5*this.state.beta)/1e3,"% ")),i.a.createElement("div",null,"In the worst",i.a.createElement("span",{className:"colorGreen"}," ",Math.round(1e5*(1-this.state.beta))/1e3,"% "),"of days, your average loss is",i.a.createElement("span",{className:"colorRed"}," ",Math.round(100*this.state.cvar*this.state.budget)/100,"$")))),i.a.createElement(U,null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",null,"VAR"),i.a.createElement("th",null,"CVAR"),i.a.createElement("th",null,"ROI")),e)),i.a.createElement(G,null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Ticker"),i.a.createElement("th",null,"weight")),t)),i.a.createElement(R,{ref:function(t){return n.svg=t}}))}}]),e}(a.Component),X=n(17),Y=n(12);function K(){var t=Object(f.a)(["\n    font-size: 14px;\n    color: white;\n    background-color: #444;\n    border-radius: 10px;\n    margin: 30px auto;\n\n    tr {\n        border: 1px solid gray;\n    td {\n        padding: 10px;\n    }\n    .border-bottom {\n        border-bottom: 1px solid white;\n        padding: 6px 0px;\n    }\n    .border-right {\n        border-right: 1px solid white;\n        padding: 0px 6px;\n    }\n"]);return K=function(){return t},t}function $(){var t=Object(f.a)(["\n    border: 1px solid steelblue;\n    background-color: rgba(255, 255, 255, .2);\n    float: right;\n    pointer-events: auto;\n\n    th {\n        padding: 3px 10px;\n    }\n\n    tr {\n        cursor: pointer;\n    }\n\n    td {\n        padding: 5px 10px;\n        text-align: center;\n    }\n\n    .selected {\n        background-color: rgba(200, 200, 200, .6);\n    }\n"]);return $=function(){return t},t}function J(){var t=Object(f.a)(["\n    border: 1px solid steelblue;\n    background-color: rgba(255, 255, 255, .2);\n    float: left;\n    pointer-events: auto;\n\n    th {\n        padding: 3px 10px;\n    }\n\n    tr {\n        cursor: pointer;\n    }\n\n    td {\n        padding: 5px 10px;\n        text-align: center;\n    }\n\n    .table-scroll {\n        height: 200px;\n        overflow: scroll;\n    }\n\n    .selected {\n        background-color: rgba(200, 200, 200, .6);\n    }\n"]);return J=function(){return t},t}function W(){var t=Object(f.a)(["\n    width: 100%;\n    height: 100%;\n\n    .links line {\n      stroke: #888;\n      stroke-width: 6;\n    }\n\n    .nodes circle {\n      pointer-events: all;\n      stroke: none;\n      stroke-width: 15px;\n      cursor: pointer;\n    }\n\n    #limitButton {\n        padding: 5px 10px;\n        border: 1px solid #AAA;\n        width: 100px;\n        text-align: center;\n        cursor: pointer;\n        background-color: #DEDEDE;\n        pointer-events: auto;\n        position: absolute;\n        bottom: 7px;\n        left: 7px;\n    }\n\n    #utilizationButton {\n        position: absolute;\n        padding: 5px 10px;\n        border: 1px solid #AAA;\n        width: 100px;\n        text-align: center;\n        cursor: pointer;\n        background-color: #DEDEDE;\n        pointer-events: auto;\n        bottom: 7px;\n        right: 7px;\n    }\n\n    select {\n        position: absolute;\n        top: 7px;\n        left: 7px;\n        -webkit-appearance: button;\n        -webkit-border-radius: 2px;\n        -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n        -webkit-padding-end: 20px;\n        -webkit-padding-start: 2px;\n        -webkit-user-select: none;\n        background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);\n        background-position: 97% center;\n        background-repeat: no-repeat;\n        border: 1px solid #AAA;\n        color: #555;\n        overflow: hidden;\n        padding: 5px 35px 5px 10px;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        pointer-events: auto;\n    }\n"]);return W=function(){return t},t}function H(){var t=Object(f.a)(["\n    height: 100%;\n    .tableTitle {\n        margin-top: 20px;\n        text-align: center;\n    }\n"]);return H=function(){return t},t}var q=m.a.div(H()),Q=m.a.svg(W()),Z=m.a.table(J()),tt=m.a.table($()),et=m.a.table(K()),nt=["#1abc9c","#3498db","#9b59b6","#34495e","#e67e22","#f1c40f"],at=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(p.a)(e).call(this,t))).state={simulation:"",numSelected:0,firstSelected:null,secondSelected:null,nodeSize:9,edgeLength:100,flows:[],allocation:[],showPaths:!1,showUtilization:0,edgesByTunnel:[],nodesByTunnel:[],tunnelIndex:0,scenario:0,downLinks:[],dashLinks:[],colorNodes:[],secondaryNodes:[],secondaryTunnels:[],scenarios:[],capacity:[],failure_probabilities:[],linkUtilization:[],flowid:null,backFlowid:null,tips:[],graph:null,num_nodes:0,limitTraffic:!0},n.click=n.click.bind(Object(b.a)(Object(b.a)(n))),n.arrowPress=n.arrowPress.bind(Object(b.a)(Object(b.a)(n))),n.dragstarted=n.dragstarted.bind(Object(b.a)(Object(b.a)(n))),n.dragged=n.dragged.bind(Object(b.a)(Object(b.a)(n))),n.dragended=n.dragended.bind(Object(b.a)(Object(b.a)(n))),n.changeTunnel=n.changeTunnel.bind(Object(b.a)(Object(b.a)(n))),n.showUtilization=n.showUtilization.bind(Object(b.a)(Object(b.a)(n))),n}return Object(h.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){this.drawGraph(this.props.topology)}},{key:"componentWillReceiveProps",value:function(t){var e=this;this.clearGraph(),this.drawGraph(t.topology),this.setState({num_nodes:t.num_nodes,f:t.flows,T:t.T,Tf:t.Tf,links:t.links,allocation:t.allocation,demand:t.demand,probabilities:t.probabilities,scenarios:t.scenarios,scenario:0,showUtilization:0,capacity:t.capacity,failure_probabilities:t.failure_probabilities,flowid:null,downLinks:[],X:t.X,var:t.var,cvar:t.cvar,limitTraffic:!0,linkUtilization:[]},function(){e.simulateTraffic()})}},{key:"componentDidUpdate",value:function(t){}},{key:"simulateTraffic",value:function(){var t=this;console.log(this.state);var e={};this.state.f.forEach(function(n,a){e[a]={id:a,src:n[0].toString(),dst:n[1].toString(),demand:t.state.demand[a],permissable:t.state.limitTraffic?1-t.state.var:1}});var n=[],a=new Array(this.state.capacity.length).fill(0);if(this.state.scenarios){var i=this.state.demand.reduce(function(t,e){return t+e});this.state.scenarios.forEach(function(r,s){var o=t.state.graph?new Array(t.state.graph.links.length).fill(0):[],l=0;Object.values(e).forEach(function(e,n){var i=0,r=t.getTunnels(e.id,e.src,e.dst,s);r.forEach(function(n,r){var c=n.weight,d=c*e.demand*e.permissable,u=!1,p=Math.max.apply(Math,Object(Y.a)(t.state.capacity));n.links.forEach(function(e){p=Math.min(p,t.state.capacity[e.index]-o[e.index]),o[e.index]+d>t.state.capacity[e.index]&&(u=!0)}),u?p>0&&(d=p,n.links.forEach(function(n){o[n.index]+=d,s===t.state.scenario&&(a[n.index]+=c*e.demand*e.permissable)}),s===t.state.scenario&&(n.sent=d,i+=d),l+=d):(n.links.forEach(function(e){o[e.index]+=d,s===t.state.scenario&&(a[e.index]+=d)}),s===t.state.scenario&&(n.sent=d,i+=d),l+=d)}),s===t.state.scenario&&(e.satisfied=i,e.tunnels=r)}),n.push(l/i)})}this.setState({flows:e,scenarioSatisfaction:n,linkUtilization:a},function(){t.updateGraph(),t.changeTunnel(0)})}},{key:"dragstarted",value:function(t){I.d.active||this.state.simulation.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}},{key:"dragged",value:function(t){t.fx=I.d.x,t.fy=I.d.y}},{key:"dragended",value:function(t){I.d.active||this.state.simulation.alphaTarget(0),t.fx=null,t.fy=null}},{key:"handleUtilization",value:function(t){this.setState({showUtilization:t},this.updateGraph)}},{key:"handleScenario",value:function(t){var e=this,n=[];this.simulateTraffic(),this.state.scenarios[t].forEach(function(t,a){t||n.push({src:String(e.state.links[a][0]),dst:String(e.state.links[a][1])})}),this.setState({downLinks:n,scenario:t},function(){e.simulateTraffic()})}},{key:"handleLimit",value:function(t){var e=this;this.setState({limitTraffic:t},function(){e.simulateTraffic()})}},{key:"colorLinks",value:function(t,e){var n=I.s("line").filter(function(e){var n=!1;return t.forEach(function(t){t.src===e.source.id&&t.dst===e.target.id&&(n=!0)}),n}),a=I.s("line").filter(function(e){var n=!1;return t.forEach(function(t){t.dst===e.source.id&&t.src===e.target.id&&(n=!0)}),n});n.style("stroke-opacity",.6),n.style("stroke",e),a.style("stroke-opacity",0),a.style("stroke",e)}},{key:"colorNodes",value:function(t,e){var n=I.s("circle").filter(function(e){return t.includes(e.id)});n.style("fill",e)}},{key:"dashLinks",value:function(t,e,n){var a=I.s("line").filter(function(e){var n=!1;return t.forEach(function(t){t.src===e.source.id&&t.dst===e.target.id&&(n=!0)}),n});I.s("line").filter(function(e){var n=!1;return t.forEach(function(t){t.dst===e.source.id&&t.src===e.target.id&&(n=!0)}),n});a.style("stroke-opacity",1),a.style("stroke-dasharray",e),a.attr("marker-end","url(#arrowhead)")}},{key:"animateLinks",value:function(t){clearInterval(this.dashInterval);var e=I.s("line").filter(function(e){var n=!1;return t.forEach(function(t){t.src===e.source.id&&t.dst===e.target.id&&(n=!0)}),n}),n=I.s("line").filter(function(e){var n=!1;return t.forEach(function(t){t.dst===e.source.id&&t.src===e.target.id&&(n=!0)}),n});e.style("stroke-opacity",1);var a=1;this.dashInterval=setInterval(function(){e.style("stroke-dashoffset",a),a-=1},50),n.style("stroke-opacity",0),e.attr("marker-end","url(#arrowhead)")}},{key:"getTunnelNodes",value:function(t){var e=[];return t.links.forEach(function(t){e.includes(t.src)||e.push(t.src),e.includes(t.dst)||e.push(t.dst)}),e}},{key:"getFlow",value:function(t,e){var n=null;return Object.values(this.state.flows).forEach(function(a){a.src===t&&a.dst===e&&(n=a)}),n}},{key:"getTunnels",value:function(t,e,n,a){var i=this,r=[],s=this.state.Tf[t],o=0,l=0;return s.forEach(function(e,n){o+=1===i.state.X[a][e-1]?i.state.allocation[t][n]:0,l+=1===i.state.X[a][e-1]?1:0}),s.forEach(function(e,n){var s=0;i.state.probabilities.forEach(function(t,n){s+=t*i.state.X[n][e-1]});var c=0;c=1===i.state.X[a][e-1]?0!==o?i.state.allocation[t][n]/o:1/l:0;var d=i.state.T[e-1],u=[];d.forEach(function(t){u.push({src:i.state.links[t-1][0].toString(),dst:i.state.links[t-1][1].toString(),index:t-1})}),c>0&&r.push({links:u,allocation:i.state.allocation[t][n],weight:c,availability:Math.round(1e6*s)/1e6,id:e-1})}),r}},{key:"getBackLink",value:function(t){var e=-1;return this.state.links.forEach(function(n,a){n[0]===t[1]&&n[1]===t[0]&&(e=a)}),-1!=e?{src:String(this.state.links[e][0]),dst:String(this.state.links[e][1])}:{}}},{key:"addTip",value:function(t,e,n){var a=I.s("circle").filter(function(e,n){return e.id===t}).select(function(){return this.parentNode}).append("g").attr("class","tip").attr("transform","translate(6,6)"),i=a.append("rect").style("fill","white").style("stroke","steelblue").style("opacity",.8);a.append("text").text(e).attr("dy","1.2em").attr("x",8),a.append("text").text(n).attr("dy","2.4em").attr("x",8);var r=a.node().getBBox();i.attr("width",r.width+15).attr("height",r.height+10)}},{key:"updateGraph",value:function(){var t=this;I.s(".tip").remove(),I.s("line").each(function(t){I.r(this).style("stroke-opacity",.1)}),I.s("line").each(function(t){I.r(this).style("stroke-dasharray","")}),I.s("line").each(function(t){I.r(this).style("stroke","#888")}),I.s("line").attr("marker-end",""),I.s("circle").each(function(t){I.r(this).style("fill","lightgrey")}),this.state.secondaryTunnels.forEach(function(e,n){t.dashLinks(e,"5,5",!1),t.colorLinks(e,nt[n])}),this.animateLinks(this.state.dashLinks),this.colorNodes(this.state.secondaryNodes,"#bbb"),this.colorNodes(this.state.colorNodes,"#aaa"),I.s("circle").filter(function(e,n){return e.id===t.state.firstSelected||e.id===t.state.secondSelected}).style("fill","steelblue"),this.state.tips.forEach(function(e){t.addTip(e.id,e.line1,e.line2)}),null===this.state.firstSelected&&this.resetColors(),this.colorLinks(this.state.downLinks,"red"),this.showUtilization(this.state.showUtilization)}},{key:"resetColors",value:function(){I.s("line").each(function(t){I.r(this).style("stroke-opacity",1)}),I.s("line").each(function(t){I.r(this).style("stroke-dasharray","")}),I.s("line").each(function(t){I.r(this).style("stroke","#888")}),I.s("line").attr("marker-end",""),I.s("circle").each(function(t){I.r(this).style("fill","black")})}},{key:"clearGraph",value:function(){var t=this;I.s("svg > .tip").remove(),I.s("svg > .links").remove(),I.s("svg > .nodes").remove(),this.setState({showPaths:!1,firstSelected:null,secondSelected:null,numSelected:0,tips:[]},function(){console.log(t.state)})}},{key:"arrowPress",value:function(t){if(39===t.keyCode&&this.state.flows[this.state.flowid]){var e=this.state.tunnelIndex+1>=this.state.flows[this.state.flowid].tunnels.length?0:this.state.tunnelIndex+1;this.changeTunnel(e)}else if(37===t.keyCode&&this.state.flows[this.state.flowid]){var n=this.state.tunnelIndex-1<0?this.state.flows[this.state.flowid].tunnels.length-1:this.state.tunnelIndex-1;this.changeTunnel(n)}else 38===t.keyCode&&this.state.scenarios.length>0?(t.preventDefault(),this.handleScenario(this.state.scenario-1<0?this.state.scenarios.length-1:this.state.scenario-1)):40===t.keyCode&&this.state.scenarios.length>0&&(t.preventDefault(),this.handleScenario(this.state.scenario+1<this.state.scenarios.length?this.state.scenario+1:0))}},{key:"showUtilization",value:function(t){for(var e=this,n=this.state.linkUtilization,a=function(t){var a=I.s(".aEnd").filter(function(e,n){return n===t});a.html("".concat(Math.round(n[t]/e.state.capacity[t]*100)/1,"%")),n[t]/e.state.capacity[t]>1?a.style("fill","red"):a.style("fill","black")},i=0;i<=n.length-1;i++)a(i);I.s(".aEnd").style("opacity",t)}},{key:"changeTunnel",value:function(t){var e=this,n=this.state.flowid,a=this.state.flows[n],i=null!==n?a.tunnels[t].sent:0,r=null!==n?a.tunnels:[],s=null!==n?r[t].links:[],o=null!==n?this.getTunnelNodes(r[t]):[],l=[],c=[];null!==n&&a.tunnels.forEach(function(t){l=[].concat(Object(Y.a)(l),Object(Y.a)(e.getTunnelNodes(t))),c=[].concat(Object(Y.a)(c),[t.links])});var d=this.state.backFlowid,u=(this.state.flows[d],[]);if(2==this.state.numSelected)null!=this.state.firstSelected&&u.push({id:this.state.firstSelected,line1:"Node: ".concat(this.state.firstSelected),line2:"Sent: ".concat(i)}),null!=this.state.secondSelected&&u.push({id:this.state.secondSelected,line1:"Node: ".concat(this.state.secondSelected),line2:"Received: ".concat(i)});else if(1==this.state.numSelected){var p=this.getNodeDemand(this.state.firstSelected),h=Object(X.a)(p,2),b=h[0],f=h[1];b=this.state.limitTraffic?(1-this.state.var)*b:b,f=this.state.limitTraffic?(1-this.state.var)*f:f,u.push({id:this.state.firstSelected,line1:"Sent: ".concat(f),line2:"Received ".concat(b)})}this.setState({tunnelIndex:t,dashLinks:s,colorNodes:o,secondaryTunnels:c,secondaryNodes:l,tips:u},this.updateGraph)}},{key:"getNodeDemand",value:function(t){var e=this,n=0,a=0;return Object.values(this.state.flows).forEach(function(i){t===i.src&&(n+=e.state.demand[i.id]),t===i.dst&&(a+=e.state.demand[i.id])}),[a,n]}},{key:"click",value:function(t){var e=this;if(0===this.state.numSelected||2===this.state.numSelected){var n,a=this.getNodeDemand(t.id),i=Object(X.a)(a,2),r=i[0],s=i[1],l=this.state.limitTraffic?1-this.state.var:1;this.setState((n={numSelected:1,firstSelected:t.id,secondSelected:null,showPaths:!1,dashLinks:[],colorNodes:[],secondaryTunnels:[]},Object(o.a)(n,"secondaryTunnels",[]),Object(o.a)(n,"flowid",null),Object(o.a)(n,"tips",[{id:t.id,line1:"Sent: ".concat(s*l),line2:"Received ".concat(r*l)}]),n),this.updateGraph)}else if(1===this.state.numSelected)if(this.state.firstSelected===t.id)this.setState({numSelected:0,firstSelected:null,secondSelected:null,tips:[],showPaths:!1,colorNodes:[],dashLinks:[]},this.updateGraph);else{var c=this.getFlow(this.state.firstSelected,t.id),d=this.getFlow(t.id,this.state.firstSelected);this.setState({numSelected:2,secondSelected:t.id,showPaths:!0,flowid:c?c.id:null,backFlowid:d?d.id:null},function(){e.changeTunnel(0)})}}},{key:"drawGraph",value:function(t){var e=this;document.addEventListener("keydown",this.arrowPress,!1);var n=I.i().force("link",I.g().id(function(t){return t.id}).distance(function(t){return 100})).force("charge",I.h().strength(-500)).force("center",I.f(this.svg.getBoundingClientRect().width/2,this.svg.getBoundingClientRect().height/2));this.setState({simulation:n},function(){var n=I.r(e.svg);n.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","-0 -5 10 10").attr("refX",13).attr("refY",0).attr("orient","auto").attr("markerWidth",3).attr("markerHeight",13).attr("xoverflow","visible").append("svg:path").attr("d","M 0,-5 L 10 ,0 L 0,5").attr("fill","#999").style("stroke","none"),I.k("./data/".concat(t,".json")).then(function(t,a){if(a)throw a;e.setState(Object(l.a)({},e.state,{graph:t})),t.links.forEach(function(t,n){t.capacity=e.state.capacity[n]});var i=n.append("g").attr("class","links").selectAll("line").data(t.links).enter().append("g").attr("class","link").append("line").attr("class","link-line"),r=(n.selectAll(".link").append("text").attr("class","aEnd").data(t.links).attr("x",function(t){return t.source.x}).attr("y",function(t){return t.source.y}).attr("text-anchor","middle").style("font-size","10px").style("opacity",0).text("yo"),I.r("body").append("div").attr("class","tooltip").style("opacity",0)),s=n.append("g").attr("class","nodes").selectAll("circle").data(t.nodes).enter().append("g").attr("class","wrapper").attr("width",10).attr("height",10).on("click",e.click).call(I.c().on("start",e.dragstarted).on("drag",e.dragged).on("end",e.dragended));s.append("circle").attr("r",14);s.append("text").text(function(t){return t.id}).style("text-anchor","middle").style("fill","#999").style("cursor","pointer").style("font-size",18).attr("transform",function(t){return"translate(0,6)"}),s.append("title").text(function(t){return t.id});var o=e;function c(t,e){var n=Math.atan2(e.y-t.y,e.x-t.x);return 30*Math.cos(n)+t.x}function d(t,e){var n=Math.atan2(e.y-t.y,e.x-t.x);return 30*Math.sin(n)+t.y}n.selectAll("line").on("mouseover",function(t){r.transition().duration(200).style("opacity",.9),r.html("<i>p</i> = "+Math.round(1e7*o.state.failure_probabilities[t.index])/1e5+"&#37;").style("width","90px").style("left",I.d.pageX+"px").style("top",I.d.pageY-28+"px")}).on("mouseout",function(t){r.transition().duration(200).style("opacity",0)}),e.state.simulation.nodes(t.nodes).on("tick",function(){i.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),n.selectAll("text.aEnd").attr("x",function(t){return c(t.source,t.target)}).attr("y",function(t){return d(t.source,t.target)}),n.selectAll("text.zEnd").attr("x",function(t){return c(t.target,t.source)}).attr("y",function(t){return d(t.target,t.source)}),s.attr("transform",function(t){return"translate("+t.x+","+t.y+")"})}),e.state.simulation.force("link").links(t.links)})})}},{key:"render",value:function(){var t,e=this;null!=this.state.flowid&&(t=this.state.flows[this.state.flowid].tunnels.map(function(t,n){return t.weight>0?i.a.createElement("tr",{className:n===e.state.tunnelIndex?"selected":"",onClick:function(){return e.changeTunnel(n)},key:n},i.a.createElement("td",{x:"0"},"Tunnel ",n),i.a.createElement("td",{x:"50"},t.weight),i.a.createElement("td",{x:"80"},t.availability)):i.a.createElement("tr",null)}));for(var n,a,r=this.state.limitTraffic?i.a.createElement("div",{id:"limitButton",onClick:function(){return e.handleLimit(!1)}},"Unlimit"):i.a.createElement("div",{id:"limitButton",onClick:function(){return e.handleLimit(!0)}},"Limit"),s=0===this.state.showUtilization?i.a.createElement("div",{id:"utilizationButton",onClick:function(){return e.handleUtilization(.6)}},"Utilization"):i.a.createElement("div",{id:"utilizationButton",onClick:function(){return e.handleUtilization(0)}},"Off"),o=0,l=[],c=[],d=[],u=[],p=[],h=[],b=[],f=function(t){u.push(i.a.createElement("th",{className:"border-bottom",key:o++},t));for(var n=[],a=[],r=[],s=function(s){var o="-",l=0;Object.values(e.state.flows).forEach(function(e,n){e.src===t.toString()&&e.dst===s.toString()&&(l=e.satisfied,o=e.demand)}),n.push(i.a.createElement("td",null,"-"===o?o:Math.round(1e4*o)/1e4)),a.push(i.a.createElement("td",null,0===l?"-":Math.round(1e5*l)/1e5)),r.push(i.a.createElement("td",null,"-"===o?"-":"".concat(Math.round(1e4*l/o)/100,"%"))),l,"-"===o?0:o},l=1;l<=parseInt(e.state.num_nodes);l++)s(l);p.push(i.a.createElement("tr",{key:o++},i.a.createElement("th",{className:"border-right"},t),n)),h.push(i.a.createElement("tr",{key:o++},i.a.createElement("th",{className:"border-right"},t),a)),b.push(i.a.createElement("tr",{key:o++},i.a.createElement("th",{className:"border-right"},t),r))},m=1;m<=parseInt(this.state.num_nodes);m++)f(m);return l.push(i.a.createElement("tr",{key:o++},i.a.createElement("th",null),u)),l.push(p),c.push(i.a.createElement("tr",{key:o++},i.a.createElement("th",null),u)),c.push(h),d.push(i.a.createElement("tr",{key:o++},i.a.createElement("th",null),u)),d.push(b),this.state.scenarios&&this.state.scenarioSatisfaction&&(n=this.state.scenarios.map(function(t,n){return i.a.createElement("tr",{className:n===e.state.scenario?"selected":"",onClick:function(){return e.handleScenario(n)},key:n},i.a.createElement("td",{x:"0"},"Scenario ",n),i.a.createElement("td",{x:"50"},Math.round(1e6*e.state.probabilities[n])/1e4,"%"),i.a.createElement("td",{x:"80"},Math.round(1e6*e.state.scenarioSatisfaction[n])/1e4,"%"))})),this.state.cvar&&(a=i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"border-bottom",style:{paddingLeft:"10px"}},"VAR"),i.a.createElement("th",{className:"border-bottom"},"CVAR")),i.a.createElement("tr",null,i.a.createElement("td",{style:{paddingLeft:"20px"}},this.state.var),i.a.createElement("td",null,"".concat(Math.round(1e6*this.state.cvar)/1e4,"%"))))),i.a.createElement(q,null,i.a.createElement(Q,{ref:function(t){return e.svg=t}},i.a.createElement("foreignObject",{x:"0",y:"0",width:"100%",height:"100%",pointerEvents:"none"},r),i.a.createElement("foreignObject",{x:"0",y:"0",width:"100%",height:"100%",pointerEvents:"none"},s),i.a.createElement("foreignObject",{x:"0",y:"0",width:"100%",height:"100%",pointerEvents:"none",style:{padding:"14px"}},this.state.scenarios&&this.state.scenarioSatisfaction&&i.a.createElement(Z,null,i.a.createElement("div",{className:"table-scroll"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",null),i.a.createElement("th",null,"availability"),i.a.createElement("th",null,"demand satisfied")),n)))),this.state.showPaths&&i.a.createElement("foreignObject",{x:"0",y:"0",width:"100%",height:"100%",pointerEvents:"none",style:{padding:"14px"}},i.a.createElement(tt,null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",null),i.a.createElement("th",null,"weight"),i.a.createElement("th",null,"availability")),t)))),i.a.createElement("div",{className:"tableTitle"},"Demand"),i.a.createElement(et,null,i.a.createElement("tbody",null,l)),i.a.createElement("div",{className:"tableTitle"},"Successful Demand"),i.a.createElement(et,null,i.a.createElement("tbody",null,c)),i.a.createElement("div",{className:"tableTitle"},"Satisfied Demand"),i.a.createElement(et,null,i.a.createElement("tbody",null,d)),i.a.createElement("div",{className:"tableTitle"},"Loss"),i.a.createElement(et,null,a))}}]),e}(a.Component);n(33);function it(){var t=Object(f.a)(["\n    background-color: #CCC\n    padding: 20px;\n    text-align: center;\n    transition: .1s all;\n\n    &:hover {\n        background-color: #999;\n        cursor: pointer;\n    }\n"]);return it=function(){return t},t}function rt(){var t=Object(f.a)(["\n    width: 100vw;\n    height: 70vh;\n\n    #inputs {\n        text-align: center;\n        padding-top: 40px;\n        width: 100%;\n    }\n    #graph {\n        background-color: #EEE;\n        margin-top: 20px;\n        border: 1px solid gray;\n        height: 80vh;\n        width: 90%;\n        margin-left: auto;\n        margin-right: auto;\n    }\n"]);return rt=function(){return t},t}var st=m.a.div(rt()),ot=m.a.div(it()),lt=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(p.a)(e).call(this,t))).state={login:!1,te:{inputs:{topology:"Custom",demand:"1",path:"ED",beta:".9",cutoff:".0001",k:"4",downscale_demand:"1000",zeroindex:"false",demand_matrix:"true",num_nodes:0},results:{var:0,cvar:0,allocation:[],flows:[],capacity:[],T:[],Tf:[],links:[]},show_results:!1},stocks:{inputs:{tickers:[""],beta:.9,roi:50,target:40,days:800,budget:1e3,KEYS:["F6JGTHROSNY4A8MV","EGZPCEQOXI85VKRT","ASDPVYC2XRAJJ81K","M4XW13HI1CWYH0KN"],key:0},results:{},show_results:!1},error:"",mode:"TE"},n.setMode=n.setMode.bind(Object(b.a)(Object(b.a)(n))),n.login=n.login.bind(Object(b.a)(Object(b.a)(n))),n.removeError=n.removeError.bind(Object(b.a)(Object(b.a)(n))),n.handleTESubmit=n.handleTESubmit.bind(Object(b.a)(Object(b.a)(n))),n.handleTEInput=n.handleTEInput.bind(Object(b.a)(Object(b.a)(n))),n.handleStockInput=n.handleStockInput.bind(Object(b.a)(Object(b.a)(n))),n.handleTickerValue=n.handleTickerValue.bind(Object(b.a)(Object(b.a)(n))),n.handleAddTicker=n.handleAddTicker.bind(Object(b.a)(Object(b.a)(n))),n.handleTickerSubmit=n.handleTickerSubmit.bind(Object(b.a)(Object(b.a)(n))),n}return Object(h.a)(e,t),Object(d.a)(e,[{key:"setMode",value:function(t){this.setState(Object(l.a)({},this.state,{mode:t}))}},{key:"removeError",value:function(){this.setState(Object(l.a)({},this.state,{error:""}))}},{key:"login",value:function(t){"CVaR2019!"===t&&this.setState(Object(l.a)({},this.state,{login:!0}))}},{key:"handleStockInput",value:function(t,e){this.setState(Object(l.a)({},this.state,{stocks:Object(l.a)({},this.state.stocks,{inputs:Object(l.a)({},this.state.stocks.inputs,Object(o.a)({},e,t)),show_results:!1})}))}},{key:"handleTickerValue",value:function(t,e){var n=this.state.stocks.inputs.tickers;n[e]=t,this.setState(Object(l.a)({},this.state,{stocks:{inputs:Object(l.a)({},this.state.stocks.inputs,{tickers:n}),show_results:!1}}))}},{key:"handleAddTicker",value:function(){var t=this.state.stocks.inputs.tickers;t.push(""),this.setState(Object(l.a)({},this.state,{stocks:Object(l.a)({},this.state.stocks,{inputs:Object(l.a)({},this.state.stocks.inputs,{tickers:t}),show_results:!1})}))}},{key:"handleTickerSubmit",value:function(){var t=this,e=[],n=[];console.log(this.state.stocks.inputs.key),Promise.all(this.state.stocks.inputs.tickers.map(function(a){return new Promise(function(i,r){fetch("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=".concat(a,"&outputsize=full&apikey=").concat(t.state.stocks.inputs.KEYS[t.state.stocks.inputs.key]),{method:"GET",mode:"cors"}).then(function(t){return t.json()}).then(function(r){for(var s=[],o=r["Time Series (Daily)"],l=Object.keys(o),c=o[l[t.state.stocks.inputs.days+1]]["4. close"],d=t.state.stocks.inputs.days;d>=0;d--){var u=o[l[d]]["4. close"];s.push((u-c)/c),c=u}e.push(s),n.push(a),i()}).catch(function(t){r(t)})})})).then(function(){console.log({nstocks:t.state.stocks.inputs.tickers.length,returns:e,beta:t.state.stocks.inputs.beta,ticker_ordered:n});fetch("http://128.30.92.156:8080/api/cvarf",{method:"POST",mode:"cors",body:JSON.stringify({nstocks:t.state.stocks.inputs.tickers.length,returns:e,beta:parseFloat(t.state.stocks.inputs.beta),roi:parseFloat(t.state.stocks.inputs.roi/t.state.stocks.inputs.budget),target:parseFloat(t.state.stocks.inputs.target/t.state.stocks.inputs.budget)}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(e){t.setState(Object(l.a)({},t.state,{stocks:Object(l.a)({},t.state.stocks,{results:e,show_results:!0,tickers:n})}))}).catch(function(t){return console.error("Error:",t)})}).catch(function(e){console.log(e);var n=t.state.stocks.inputs.key,a=t.state.stocks.inputs.key+1>=t.state.stocks.inputs.KEYS.length?0:t.state.stocks.inputs.key+1;t.setState(Object(l.a)({},t.state,{stocks:Object(l.a)({},t.state.stocks,{inputs:Object(l.a)({},t.state.stocks.inputs,{key:a})}),error:{error:e,message:"API error with key ".concat(n,"...")}}))})}},{key:"handleTEInput",value:function(t,e){console.log(this.state.te.inputs),this.setState(Object(l.a)({},this.state,{te:Object(l.a)({},this.state.te,{inputs:Object(l.a)({},this.state.te.inputs,Object(o.a)({},e,t)),show_results:!1})}))}},{key:"handleTESubmit",value:function(){var t=this,e={topology:this.state.te.inputs.topology,demand:this.state.te.inputs.demand,path:this.state.te.inputs.path,beta:this.state.te.inputs.beta,cutoff:this.state.te.inputs.cutoff};switch(this.state.te.inputs.path.includes("ksp")?e.k="".concat(this.state.te.inputs.path.split("_")[1]):e.k="4",e.topology){case"Custom":case"B4":e.downscale_demand="1";break;case"IBM":e.downscale_demand="1000";break;case"Abilene":e.downscale_demand="1";break;default:e.downscale_demand="1000"}fetch("http://128.30.92.156:8080/api/teavar",{method:"POST",mode:"cors",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(n){console.log(n),t.setState(Object(l.a)({},t.state,{te:Object(l.a)({},t.state.te,{inputs:Object(l.a)({},t.state.te.inputs,{num_nodes:e.num_nodes,zeroindex:e.zeroindex}),results:n,show_results:!0})}))}).catch(function(t){return console.error("Error:",t)})}},{key:"render",value:function(){var t,e;return"TE"===this.state.mode?(e=i.a.createElement(v,{modes:["TE","Stocks"],mode:this.state.mode,setMode:this.setMode}),t=i.a.createElement("div",null,i.a.createElement(st,null,i.a.createElement("div",{id:"inputs"},i.a.createElement(E,{handleTESubmit:this.handleTESubmit,handleTEInput:this.handleTEInput})),i.a.createElement("div",{id:"graph"},i.a.createElement(at,{topology:this.state.te.inputs.topology,num_nodes:this.state.te.results.num_nodes,capacity:this.state.te.results.capacity,failure_probabilities:this.state.te.results.failure_probabilities,T:this.state.te.results.T,Tf:this.state.te.results.Tf,links:this.state.te.results.links,flows:this.state.te.results.flows,allocation:this.state.te.results.allocation,demand:this.state.te.results.demand,probabilities:this.state.te.results.probabilities,scenarios:this.state.te.results.scenarios,X:this.state.te.results.X,var:this.state.te.results.var,cvar:this.state.te.results.cvar}))))):this.state.login?(e=i.a.createElement(v,{modes:["TE","Stocks"],mode:this.state.mode,setMode:this.setMode}),t=i.a.createElement("div",null,i.a.createElement(j,{handleTickerValue:this.handleTickerValue,handleStockInput:this.handleStockInput,handleAddTicker:this.handleAddTicker,handleTickerSubmit:this.handleTickerSubmit,tickers:this.state.stocks.inputs.tickers,tickerMatches:this.state.stocks.tickerMatches}),this.state.stocks.show_results&&i.a.createElement(V,{data:this.state.stocks.results,roi:parseFloat(this.state.stocks.inputs.roi),target:parseFloat(this.state.stocks.inputs.target),tickers:this.state.stocks.tickers,budget:parseFloat(this.state.stocks.inputs.budget)}))):(t=i.a.createElement(z,{login:this.login}),e=i.a.createElement(v,{modes:["TE","Stocks"],mode:this.state.mode,setMode:this.setMode})),i.a.createElement("div",null,e,""!==this.state.error&&i.a.createElement(ot,{onClick:this.removeError},this.state.error.message),t)}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(lt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.f2ae1659.chunk.js.map