(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(t,e,n){t.exports=n(33)},32:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(12),s=n.n(i),o=n(11),l=n(3),c=n(6),d=n(7),u=n(9),p=n(8),h=n(10),m=n(2),b=n(4),f=n(5);function g(){var t=Object(b.a)(["\n    position: fixed;\n    height: 67px;\n    width: 100vw;\n    top: 0;\n    border-bottom: 1px solid #222;\n    box-shadow: 0 1px 0 #262626;\n    background-color: #191919;\n    background-image: -webkit-gradient(linear,left top,left bottom,from(#282828),to(#191919));\n    background-image: -webkit-linear-gradient(top,#282828,#191919);\n    background-image: linear-gradient(top,#282828,#191919);\n    background-repeat: no-repeat;\n    z-index: 10;\n\n    #left {\n        position: absolute;\n        height: 100%;\n        left: 10px;\n    }\n\n    #center {\n        position: absolute;\n        height: 100%;\n        left: 50%;\n        transform: translateX(-50%);\n        color: white;\n\n        #title {\n            font-size: 25px;\n            padding-top: 15px;\n        }\n    }\n\n    #right {\n        position: absolute;\n        height: 100%;\n        padding-top: 20px;\n        padding-right: 20px;\n        right: 10px;\n        color: white;\n\n        .link {\n            cursor: pointer;\n            &:hover {\n                border-bottom: 1px solid white;\n            }\n        }\n    }\n"]);return g=function(){return t},t}var k=f.a.div(g()),v=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this,e=this.props.modes.map(function(e,n){return t.props.mode===e?"":r.a.createElement("div",{key:n,className:"link",onClick:function(n){return t.props.setMode(e)}},e)});return r.a.createElement("div",null,r.a.createElement(k,null,r.a.createElement("div",{id:"left"}),r.a.createElement("div",{id:"center"},r.a.createElement("div",{id:"title"},"TEAVAR Demo")),r.a.createElement("div",{id:"right"},e)))}}]),e}(a.Component);function x(){var t=Object(b.a)(["\n    form {\n        margin: 10px;\n        select {\n         -webkit-appearance: button;\n         -webkit-border-radius: 2px;\n         -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n         -webkit-padding-end: 20px;\n         -webkit-padding-start: 2px;\n         -webkit-user-select: none;\n         background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);\n         background-position: 97% center;\n         background-repeat: no-repeat;\n         border: 1px solid #AAA;\n         color: #555;\n         font-size: inherit;\n         overflow: hidden;\n         padding: 5px 10px;\n         text-overflow: ellipsis;\n         white-space: nowrap;\n         width: 300px;\n        }\n    }\n    .input {\n      text-align: center;\n      width: 100%;\n      display: block;\n      height: 50px;\n\n      select {\n        border: none;\n      }\n\n      input, form {\n        font-size: 15px;\n        margin-left: 0;\n        margin-right: 0;\n        display: inline-block;\n        border-left: none;\n        border-right: 1px solid #AAA;\n        border-top: 1px solid #AAA;\n        border-bottom: 1px solid #AAA;\n        border-top-left-radius: 0px;\n        border-bottom-left-radius: 0px;\n      }\n    }\n\n    .input_label {\n      color: white;\n      display: inline-block;\n      width: 75px;\n      height: calc(100% - 34px);\n      background-color: #999;\n      vertical-align: top;\n      margin: 10px 0px;\n      padding: 6px 10px;\n      border-left: 1px solid #AAA;\n      border-top: 1px solid #AAA;\n      border-bottom: 1px solid #AAA;\n      font-size: 14px;\n    }\n\n    input {\n      position: relative;\n      display: block;\n      margin: 10px auto;\n      -webkit-appearance: button;\n      -webkit-border-radius: 2px;\n      -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n      -webkit-padding-end: 20px;\n      -webkit-padding-start: 2px;\n      -webkit-user-select: none;\n      border: 1px solid #AAA;\n      color: #555;\n      font-size: inherit;\n      overflow: hidden;\n      padding: 5px 10px;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      width: 278px;\n    }\n    button {\n      margin: 10px;\n    }\n"]);return x=function(){return t},t}var E=f.a.div(x()),w=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement(E,null,r.a.createElement("div",{className:"input"},r.a.createElement("div",{className:"input_label"},"Topology"),r.a.createElement("form",null,r.a.createElement("select",{name:"dropdown",onChange:function(e){return t.props.handleTEInput(e.target.value,"topology")}},r.a.createElement("option",{value:"Custom",default:!0},"Small Net"),r.a.createElement("option",{value:"B4"},"B4"),r.a.createElement("option",{value:"IBM"},"IBM"),r.a.createElement("option",{value:"Abilene"},"Abilene")))),r.a.createElement("div",{className:"input"},r.a.createElement("div",{className:"input_label"},"Demand"),r.a.createElement("form",null,r.a.createElement("select",{name:"dropdown",onChange:function(e){return t.props.handleTEInput(e.target.value,"demand")}},r.a.createElement("option",{value:"1",default:!0},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"6"},"6")))),r.a.createElement("div",{className:"input"},r.a.createElement("div",{className:"input_label"},"Paths"),r.a.createElement("form",null,r.a.createElement("select",{name:"dropdown",onChange:function(e){return t.props.handleTEInput(e.target.value,"path")}},r.a.createElement("option",{value:"SMORE",default:!0},"Oblivious"),r.a.createElement("option",{value:"ED",default:!0},"ED"),r.a.createElement("option",{value:"ksp_2"},"KSP_2"),r.a.createElement("option",{value:"ksp_4"},"KSP_4"),r.a.createElement("option",{value:"ksp_6"},"KSP_6")))),r.a.createElement("div",{className:"input"},r.a.createElement("div",{className:"input_label"},"Beta (%)"),r.a.createElement("input",{type:"text",placeholder:"0.9",onChange:function(e){return t.props.handleTEInput(e.target.value,"beta")}})),r.a.createElement("div",{className:"input"},r.a.createElement("div",{className:"input_label"},"Cutoff (%)"),r.a.createElement("input",{type:"text",placeholder:"0.0001",onChange:function(e){return t.props.handleTEInput(e.target.value,"cutoff")}})),r.a.createElement("button",{onClick:function(e){return t.props.handleTESubmit()}},"Submit")))}}]),e}(a.Component);function y(){var t=Object(b.a)(["\n    margin 40px auto;\n    text-align: center;\n\n    form {\n        margin: 10px;\n        select {\n         -webkit-appearance: button;\n         -webkit-border-radius: 2px;\n         -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n         -webkit-padding-end: 20px;\n         -webkit-padding-start: 2px;\n         -webkit-user-select: none;\n         background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);\n         background-position: 97% center;\n         background-repeat: no-repeat;\n         border: 1px solid #AAA;\n         color: #555;\n         font-size: inherit;\n         overflow: hidden;\n         padding: 5px 10px;\n         text-overflow: ellipsis;\n         white-space: nowrap;\n         width: 300px;\n        }\n    }\n\n\n    .input {\n      text-align: center;\n      width: 100%;\n      display: block;\n      height: 50px;\n\n      input {\n        display: inline-block;\n        border-left: none;\n        border-right: 1px solid #AAA;\n        border-top: 1px solid #AAA;\n        border-bottom: 1px solid #AAA;\n        border-top-left-radius: 0px;\n        border-bottom-left-radius: 0px;\n      }\n    }\n\n    .input_label {\n      color: white;\n      display: inline-block;\n      width: 75px;\n      height: calc(100% - 34px);\n      background-color: #999;\n      vertical-align: top;\n      margin: 10px 0px;\n      padding: 6px 10px;\n      border-left: 1px solid #AAA;\n      border-top: 1px solid #AAA;\n      border-bottom: 1px solid #AAA;\n      font-size: 14px;\n    }\n\n    input {\n      position: relative;\n      display: block;\n      margin: 10px auto;\n      -webkit-appearance: button;\n      -webkit-border-radius: 2px;\n      -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n      -webkit-padding-end: 20px;\n      -webkit-padding-start: 2px;\n      -webkit-user-select: none;\n      border: 1px solid #AAA;\n      color: #555;\n      font-size: inherit;\n      overflow: hidden;\n      padding: 5px 10px;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      width: 278px;\n    }\n    .matches {\n      position: relative;\n      top: 10px;\n    }\n    button {\n      margin: 10px;\n    }\n"]);return y=function(){return t},t}var O=f.a.div(y()),A=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t,e=this,n=this.props.tickers.map(function(t,n){return r.a.createElement("input",{key:n,type:"text",placeholder:"Ticker ".concat(n),value:t,onChange:function(t){return e.props.handleTickerValue(t.target.value,n)}})});return this.props.tickerMatches&&(t=this.props.tickerMatches.map(function(t){return r.a.createElement("div",null,t["1. symbol"])})),r.a.createElement("div",null,r.a.createElement(O,null,r.a.createElement("div",{className:"tickers_label"},"Portfolio Tickers"),n,r.a.createElement("div",null,t),r.a.createElement("button",{onClick:function(t){return e.props.handleAddTicker()}},"Add"),r.a.createElement("div",{className:"input"},r.a.createElement("div",{className:"input_label"},"Budget ($)"),r.a.createElement("input",{type:"text",placeholder:"1000",onChange:function(t){return e.props.handleStockInput(t.target.value,"budget")}})),r.a.createElement("div",{className:"input"},r.a.createElement("div",{className:"input_label"},"Return ($)"),r.a.createElement("input",{type:"text",placeholder:"50",onChange:function(t){return e.props.handleStockInput(t.target.value,"roi")}})),r.a.createElement("div",{className:"input"},r.a.createElement("div",{className:"input_label"},"Loss ($)"),r.a.createElement("input",{type:"text",placeholder:"40",onChange:function(t){return e.props.handleStockInput(t.target.value,"target")}})),r.a.createElement("button",{onClick:function(t){return e.props.handleTickerSubmit()}},"Submit")))}}]),e}(a.Component);function j(){var t=Object(b.a)(["\n  color: white;\n  background-color: #444;\n  border-radius: 10px;\n  margin: 30px auto;\n  tr {\n    border: 1px solid gray;\n    td {\n      padding: 10px;\n    }\n  }\n  .border-bottom {\n    border-bottom: 1px solid white;\n    padding: 6px 0px;\n  }\n  .border-right {\n    border-right: 1px solid white;\n    padding: 0px 6px;\n  }\n"]);return j=function(){return t},t}function S(){var t=Object(b.a)(["\n  color: white;\n"]);return S=function(){return t},t}f.a.div(S());var _=f.a.table(j());a.Component;function T(){var t=Object(b.a)(["\n    form {\n        margin: 10px;\n        select {\n         -webkit-appearance: button;\n         -webkit-border-radius: 2px;\n         -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n         -webkit-padding-end: 20px;\n         -webkit-padding-start: 2px;\n         -webkit-user-select: none;\n         background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);\n         background-position: 97% center;\n         background-repeat: no-repeat;\n         border: 1px solid #AAA;\n         color: #555;\n         font-size: inherit;\n         overflow: hidden;\n         padding: 5px 10px;\n         text-overflow: ellipsis;\n         white-space: nowrap;\n         width: 300px;\n        }\n    }\n    .input {\n      text-align: center;\n      width: 100%;\n      display: block;\n      height: 50px;\n\n      select {\n        border: none;\n      }\n\n      .input-elt {\n        font-size: 15px;\n        margin-left: 0;\n        margin-right: 0;\n        display: inline-block;\n        border-left: none;\n        border-right: 1px solid #AAA;\n        border-top: 1px solid #AAA;\n        border-bottom: 1px solid #AAA;\n        border-top-left-radius: 0px;\n        border-bottom-left-radius: 0px;\n      }\n    }\n\n    .input_label {\n      color: white;\n      display: inline-block;\n      width: 75px;\n      height: calc(100% - 34px);\n      background-color: #999;\n      vertical-align: top;\n      margin: 10px 0px;\n      padding: 6px 10px;\n      border-left: 1px solid #AAA;\n      border-top: 1px solid #AAA;\n      border-bottom: 1px solid #AAA;\n      font-size: 14px;\n    }\n\n    .input-elt {\n      position: relative;\n      display: block;\n      margin: 10px auto;\n      -webkit-appearance: button;\n      -webkit-border-radius: 2px;\n      -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n      -webkit-padding-end: 20px;\n      -webkit-padding-start: 2px;\n      -webkit-user-select: none;\n      border: 1px solid #AAA;\n      color: #555;\n      font-size: inherit;\n      overflow: hidden;\n      padding: 5px 10px;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      width: 278px;\n    }\n    .button {\n        color: white;\n        display: block;\n        width: 75px;\n        background-color: #999;\n        vertical-align: top;\n        margin: 10px auto;\n        padding: 6px 10px;\n        border-left: 1px solid #AAA;\n        border-top: 1px solid #AAA;\n        border-bottom: 1px solid #AAA;\n        font-size: 14px;\n        border-radius: 5px;\n    }\n"]);return T=function(){return t},t}function C(){var t=Object(b.a)(["\n    margin-top: 30vh;\n"]);return C=function(){return t},t}var N=f.a.div(C()),z=f.a.div(T()),M=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(p.a)(e).call(this,t))).state={password:""},n}return Object(h.a)(e,t),Object(d.a)(e,[{key:"handlePassword",value:function(t){this.setState({password:t})}},{key:"render",value:function(){var t=this;return r.a.createElement(N,null,r.a.createElement(z,{id:"login-window"},r.a.createElement("form",{className:"input"},r.a.createElement("input",{className:"input-elt",type:"password",placeholder:"",onChange:function(e){return t.handlePassword(e.target.value)}}),r.a.createElement("input",{className:"button",type:"submit",onClick:function(e){return t.props.login(t.state.password)},value:"Login"}))))}}]),e}(a.Component),I=n(1);function F(){var t=Object(b.a)(["\n    border: 1px solid gray;\n    background-color: rgba(255, 255, 255, .2);\n    margin: 10px auto;\n    margin-top: 70px;\n\n    th {\n        padding: 3px 10px;\n    }\n\n    td {\n        padding: 5px 10px;\n        text-align: center;\n    }\n\n    .selected {\n        background-color: rgba(200, 200, 200, .6);\n    }\n"]);return F=function(){return t},t}function L(){var t=Object(b.a)(["\n    border: 1px solid gray;\n    background-color: rgba(255, 255, 255, .2);\n    margin: 0px auto;\n    th {\n        padding: 3px 10px;\n    }\n\n    td {\n        padding: 5px 10px;\n        text-align: center;\n    }\n\n    .selected {\n        background-color: rgba(200, 200, 200, .6);\n    }\n"]);return L=function(){return t},t}function P(){var t=Object(b.a)(["\n  display: block;\n  margin: -60px auto 0px auto;\n  height: 700px;\n  width: 900px;\n"]);return P=function(){return t},t}function R(){var t=Object(b.a)(["\n    position: relative;\n    svg {\n        font-family: Sans-Serif, Arial;\n    }\n    .line {\n      stroke-width: 4;\n      fill: none;\n    }\n\n    .axis path {\n      stroke: black;\n    }\n\n    .text {\n      font-size: 12px;\n    }\n\n    .title-text {\n      font-size: 12px;\n    }\n\n    #all-statements {\n      display: block;\n      width: 100%;\n      border-bottom: 1px solid black;\n    }\n\n    #statement-table {\n      background-color: #EEE;\n      margin-top: 10px;\n    }\n\n    #statements {\n      width: 40%;\n      margin: 0px auto;\n      margin-bottom: 70px;\n      background-color: #EEE;\n      padding: 20px;\n      border-radius: 5px;\n      font-size: 18px;\n      text-align:center;\n\n      div {\n        margin: 20px 0px;\n      }\n      .colorGreen {\n        color: rgb(0,150,0);\n      }\n      .colorRed {\n        color: rgb(150, 0,0);\n      }\n    }\n"]);return R=function(){return t},t}var B=f.a.div(R()),G=f.a.svg(P()),D=f.a.table(L()),X=f.a.table(F()),V=function(t){function e(t){var n;return Object(c.a)(this,e),n=Object(u.a)(this,Object(p.a)(e).call(this,t)),console.log(t),n.state={beta:t.data.optimal_b,roi:t.roi/t.budget,cvar:t.data.optimal_cvar,var:t.data.optimal_var,a:t.data.optimal_a,budget:t.budget,selected:{allocation:t.data.optimal_a,var:t.data.optimal_var,cvar:t.data.optimal_cvar,gain:t.roi/t.budget,name:"test_"+t.data.optimal_b,id:-1}},n.drawGraph=n.drawGraph.bind(Object(m.a)(Object(m.a)(n))),n.selectLine=n.selectLine.bind(Object(m.a)(Object(m.a)(n))),n.highlightCircles=n.highlightCircles.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){this.drawGraph(this.props.data)}},{key:"componentWillReceiveProps",value:function(t){console.log(t),this.setState({beta:t.data.optimal_b,roi:t.roi/t.budget,cvar:t.data.optimal_cvar,var:t.data.optimal_var,budget:t.budget,a:t.data.optimal_a,selected:{allocation:t.data.optimal_a,var:t.data.optimal_var,cvar:t.data.optimal_cvar,gain:t.roi/t.budget,name:"test_"+t.data.optimal_b}}),this.drawGraph(t.data)}},{key:"selectLine",value:function(t){var e=this;console.log(t),this.setState({selected:t},function(){e.highlightCircles()})}},{key:"highlightCircles",value:function(){var t=this;if(I.s("circle").style("opacity",.5),I.s("circle").attr("r",6),this.state.selected){var e=I.s("circle").filter(function(e,n){return e.id===t.state.selected.id});e.style("opacity",1),e.attr("r",8)}}},{key:"drawGraph",value:function(t){console.log(t);var e=t.beta,n=t.gains,a=0,r=e.map(function(e,r){var i=n.map(function(n,i){return{gain:n,cvar:t.cvar[r][i],var:t.var[r][i],allocation:t.allocation[r][i],name:"test_"+e,line_id:r,point_id:i,id:a++}});return{name:"Beta="+e,values:i,beta:e,id:r}}),i=r.length;r.push({name:"Beta="+t.optimal_b,beta:t.optimal_b,id:a++,values:[{gain:this.props.roi/this.props.budget,cvar:t.optimal_cvar,var:t.optimal_var,allocation:t.optimal_a,name:"test_"+t.optimal_b,line_id:i+1,point_id:-1,id:-1}]}),console.log(r);var s=I.o().domain(I.e(r[0].values,function(t){return t.gain})).range([0,700]),o=t.cvar;o.push([t.optimal_cvar]);var l=I.o().domain([I.n(o.map(function(t){return I.n(t,function(t){return t})}),function(t){return t}),I.m(o.map(function(t){return I.m(t,function(t){return t})}),function(t){return t})]).range([500,0]),c=I.p(I.q),d=I.r(this.svg).append("g").attr("height","700px").attr("width","900px").attr("transform","translate(".concat(100,", ").concat(100,")"));d.append("text").attr("class","title-text").attr("text-anchor","middle").attr("x",350).attr("y",5);var u=I.l().x(function(t){return s(t.gain)}).y(function(t){return l(t.cvar)}),p=d.append("g").attr("class","lines"),h=this.highlightCircles;p.selectAll(".line-group").data(r).enter().append("g").attr("class","line-group").append("path").attr("class","line").attr("d",function(t){return u(t.values)}).style("stroke",function(t,e){return c(e)}).style("opacity","0.25").on("mouseover",function(t,e){I.s(".line").style("opacity","0.1"),I.s("circle").filter(function(e,n){return e.line_id===t.id}).attr("opacity",1),I.r(this).style("opacity","0.6").style("stroke-width","4px").style("cursor","pointer")}).on("mouseout",function(t){h(),I.r(this).style("opacity","0.25").style("stroke-width","4px").style("cursor","pointer")}),p.selectAll("circle-group").data(r).enter().append("g").attr("id",function(t,e){return"circle-group-".concat(e)}).attr("class","circle-group").style("fill",function(t,e){return c(e)}).selectAll("circle").data(function(t){return t.values}).enter().append("g").attr("class","circle").attr("id",function(t,e){return"circle-".concat(e)}).on("click",this.selectLine).append("circle").attr("cx",function(t){return s(t.gain)}).attr("cy",function(t){return l(t.cvar)}).attr("r",6).style("opacity","0.85").on("mouseover",function(t,e){I.s("circle").filter(function(e,n){return e.id===t.id}).attr("r",8)}).on("mouseout",function(t){I.s("circle").filter(function(e,n){return e.id===t.id}).attr("r",6),h()}),I.s(".circle-group").append("text").attr("class","text").text(function(t){return t.name}).attr("x",function(t){return s(t.values[0].gain)+20}).attr("y",function(t){return l(t.values[0].cvar)});var m=I.j(".3p"),b=I.a(s).ticks(5).tickFormat(m),f=I.b(l).ticks(5).tickFormat(m);d.append("g").attr("class","x axis").attr("transform","translate(0, ".concat(500,")")).call(b).append("text").attr("x",350).attr("y","45").attr("text-anchor","middle").attr("fill","#000").attr("font-size","18px").text("Return on Investment (%)"),d.append("g").attr("class","y axis").attr("dy","1em").call(f).append("text").attr("y",-50).attr("x",-250).attr("text-anchor","middle").attr("transform","rotate(-90)").attr("fill","#000").attr("font-size","18px").text("Conditional Value at Risk (%)"),this.highlightCircles()}},{key:"render",value:function(){var t,e,n=this,a=[],i=[];return this.state.a.forEach(function(t,e){a.push(r.a.createElement("th",{x:"0"},n.props.tickers[e])),i.push(r.a.createElement("td",{x:"0"},"$",Math.round(100*t*n.state.budget)/100))}),this.state.selected&&(e=r.a.createElement("tr",null,r.a.createElement("td",{x:"0"},Math.round(1e5*this.state.selected.var)/1e3,"%"),r.a.createElement("td",{x:"50"},Math.round(1e5*this.state.selected.cvar)/1e3,"%"),r.a.createElement("td",{x:"50"},Math.round(1e5*this.state.selected.gain)/1e3,"%")),t=this.state.selected.allocation.map(function(t,e){return r.a.createElement("tr",{key:e},r.a.createElement("td",{x:"0"},n.props.tickers[e]),r.a.createElement("td",{x:"50"},Math.round(1e5*t)/1e3,"%"))})),console.log(this.state),r.a.createElement(B,null,r.a.createElement("div",{id:"all-statements"},r.a.createElement(X,{id:"statement-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,a),r.a.createElement("tr",null,i))),r.a.createElement("div",{id:"statements"},r.a.createElement("div",null,"Your gain is",r.a.createElement("span",{className:"colorGreen"}," ",Math.round(100*this.state.roi*this.state.budget)/100,"$ "),"return on invesment"),r.a.createElement("div",null,"Your loss is no less than",r.a.createElement("span",{className:"colorRed"}," ",Math.round(100*this.state.var*this.state.budget)/100,"$ "),"with probability",r.a.createElement("span",{className:"colorGreen"}," ",Math.round(1e5*this.state.beta)/1e3,"% ")),r.a.createElement("div",null,"In the worst",r.a.createElement("span",{className:"colorGreen"}," ",Math.round(1e5*(1-this.state.beta))/1e3,"% "),"of days, your average loss is",r.a.createElement("span",{className:"colorRed"}," ",Math.round(100*this.state.cvar*this.state.budget)/100,"$")))),r.a.createElement(X,null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"VAR"),r.a.createElement("th",null,"CVAR"),r.a.createElement("th",null,"ROI")),e)),r.a.createElement(D,null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ticker"),r.a.createElement("th",null,"weight")),t)),r.a.createElement(G,{ref:function(t){return n.svg=t}}))}}]),e}(a.Component),U=n(19);function Y(){var t=Object(b.a)(["\n    font-size: 14px;\n    color: white;\n    background-color: #444;\n    border-radius: 10px;\n    margin: 30px auto;\n\n    tr {\n        border: 1px solid gray;\n    td {\n        padding: 10px;\n    }\n    .border-bottom {\n        border-bottom: 1px solid white;\n        padding: 6px 0px;\n    }\n    .border-right {\n        border-right: 1px solid white;\n        padding: 0px 6px;\n    }\n"]);return Y=function(){return t},t}function K(){var t=Object(b.a)(["\n    border: 1px solid steelblue;\n    background-color: rgba(255, 255, 255, .2);\n    float: right;\n\n    th {\n        padding: 3px 10px;\n    }\n\n    td {\n        padding: 5px 10px;\n        text-align: center;\n    }\n\n    .selected {\n        background-color: rgba(200, 200, 200, .6);\n    }\n"]);return K=function(){return t},t}function $(){var t=Object(b.a)(["\n    width: 100%;\n    height: 100%;\n\n    .links line {\n      stroke: #888;\n      stroke-width: 4;\n    }\n\n    .nodes circle {\n      pointer-events: all;\n      stroke: none;\n      stroke-width: 15px;\n      cursor: pointer;\n    }\n\n\n\n    #utilizationButton {\n        padding: 5px 10px;\n        border: 1px solid #AAA;\n        width: 100px;\n        text-align: center;\n        cursor: pointer;\n        background-color: #DEDEDE;\n        pointer-events: auto;\n    }\n\n    select {\n        position: absolute;\n        bottom: 8px;\n        right: 8px;\n        -webkit-appearance: button;\n        -webkit-border-radius: 2px;\n        -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);\n        -webkit-padding-end: 20px;\n        -webkit-padding-start: 2px;\n        -webkit-user-select: none;\n        background-image: url(http://i62.tinypic.com/15xvbd5.png), -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);\n        background-position: 97% center;\n        background-repeat: no-repeat;\n        border: 1px solid #AAA;\n        color: #555;\n        overflow: hidden;\n        padding: 5px 35px 5px 10px;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        pointer-events: auto;\n    }\n"]);return $=function(){return t},t}function J(){var t=Object(b.a)(["\n    height: 100%;\n    .tableTitle {\n        margin-top: 20px;\n        text-align: center;\n    }\n"]);return J=function(){return t},t}var W=f.a.div(J()),H=f.a.svg($()),q=f.a.table(K()),Q=f.a.table(Y()),Z=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(p.a)(e).call(this,t))).state={simulation:"",numSelected:0,firstSelected:null,secondSelected:null,nodeSize:9,edgeLength:100,flows:[],allocation:[],showPaths:!1,showUtilization:0,edgesByTunnel:[],nodesByTunnel:[],tunnelIndex:0,scenario:0,downLinks:[],dashLinks:[],colorNodes:[],scenarios:[],flowid:null,backFlowid:null,tips:[],graph:null,num_nodes:0},n.click=n.click.bind(Object(m.a)(Object(m.a)(n))),n.arrowPress=n.arrowPress.bind(Object(m.a)(Object(m.a)(n))),n.dragstarted=n.dragstarted.bind(Object(m.a)(Object(m.a)(n))),n.dragged=n.dragged.bind(Object(m.a)(Object(m.a)(n))),n.dragended=n.dragended.bind(Object(m.a)(Object(m.a)(n))),n.changeTunnel=n.changeTunnel.bind(Object(m.a)(Object(m.a)(n))),n.showUtilization=n.showUtilization.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){this.drawGraph(this.props.topology)}},{key:"componentWillReceiveProps",value:function(t){var e=this;this.clearGraph(),this.drawGraph(t.topology),this.setState({num_nodes:t.num_nodes,f:t.flows,T:t.T,Tf:t.Tf,links:t.links,allocation:t.allocation,demand:t.demand,probabilities:t.probabilities,scenarios:t.scenarios,scenario:0,showUtilization:0,flowid:null,downLinks:[],X:t.X,var:t.var,cvar:t.cvar},function(){var n={};t.flows.forEach(function(a,r){var i=e.getTunnels(r,a[0],a[1]);n[r]={id:r,src:a[0].toString(),dst:a[1].toString(),tunnels:i,demand:t.demand[r]}});var a=[];if(t.scenarios){var r=t.demand.reduce(function(t,e){return t+e});t.scenarios.forEach(function(i,s){var o=e.state.graph?new Array(e.state.graph.links.length).fill(0):[],l=0;Object.values(n).forEach(function(n,a){var r=0,i=0;n.tunnels.forEach(function(n,o){r+=1===t.X[s][n.id]?e.state.allocation[a][o]:0,i+=1===t.X[s][n.id]?1:0}),n.tunnels.forEach(function(c,d){var u=0;u=1===t.X[s][c.id]?0!==r?e.state.allocation[a][d]/r:1/i:0;var p=!1;c.links.forEach(function(t){var n=e.state.graph.links.filter(function(e,n){return n===t.index});n[0]&&o[t.index]>=n[0].capacity&&(p=!0)}),p||(c.links.forEach(function(t){o[t.index]+=u*n.demand}),l+=u*n.demand)})}),a.push(l/r)})}e.setState({flows:n,scenarioSatisfaction:a},e.updateGraph)})}},{key:"componentDidUpdate",value:function(t){}},{key:"dragstarted",value:function(t){I.d.active||this.state.simulation.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}},{key:"dragged",value:function(t){t.fx=I.d.x,t.fy=I.d.y}},{key:"dragended",value:function(t){I.d.active||this.state.simulation.alphaTarget(0),t.fx=null,t.fy=null}},{key:"handleScenario",value:function(t){var e=this,n=[];this.state.scenarios[t].forEach(function(t,a){t||(n.push(a),n.push(e.getBackLink(e.state.links[a])))}),this.setState({downLinks:n,scenario:t},function(){var t={};e.state.f.forEach(function(n,a){var r=e.getTunnels(a,n[0],n[1]);t[a]={id:a,src:n[0].toString(),dst:n[1].toString(),tunnels:r,demand:e.state.demand[a]}}),e.setState({flows:t},function(){return e.showUtilization(e.state.showUtilization)})})}},{key:"colorLinks",value:function(t,e){var n=I.s("line").filter(function(e){var n=!1;return t.forEach(function(t){t===e.index&&(n=!0)}),n});n.style("stroke-opacity",.6),n.style("stroke",e)}},{key:"colorNodes",value:function(t,e){var n=I.s("circle").filter(function(e){return t.includes(e.id)});n.style("fill",e)}},{key:"dashLinks",value:function(t,e){var n=I.s("line").filter(function(e){var n=!1;return t.forEach(function(t){t.src===e.source.id&&t.dst===e.target.id&&(n=!0)}),n}),a=I.s("line").filter(function(e){var n=!1;return t.forEach(function(t){t.dst===e.source.id&&t.src===e.target.id&&(n=!0)}),n});n.style("stroke-opacity",1),n.style("stroke-dasharray",e),a.style("stroke-opacity",1),a.style("stroke-dasharray",e),n.attr("marker-end","url(#arrowhead)")}},{key:"getTunnelNodes",value:function(t){var e=[];return t.links.forEach(function(t){e.includes(t.src)||e.push(t.src),e.includes(t.dst)||e.push(t.dst)}),e}},{key:"getFlow",value:function(t,e){var n=null;return Object.values(this.state.flows).forEach(function(a){a.src===t&&a.dst===e&&(n=a)}),n}},{key:"getTunnels",value:function(t,e,n){var a=this,r=[],i=this.state.Tf[t],s=0,o=0;return i.forEach(function(e,n){s+=1===a.state.X[a.state.scenario][e-1]?a.state.allocation[t][n]:0,o+=1===a.state.X[a.state.scenario][e-1]?1:0}),i.forEach(function(e,n){var i=0;a.state.probabilities.forEach(function(t,n){i+=t*a.state.X[n][e-1]});var l=0;l=1===a.state.X[a.state.scenario][e-1]?0!==s?a.state.allocation[t][n]/s:1/o:0;var c=a.state.T[e-1],d=[];c.forEach(function(t){d.push({src:a.state.links[t-1][0].toString(),dst:a.state.links[t-1][1].toString(),index:t-1})}),r.push({links:d,allocation:a.state.allocation[t][n],weight:l,sent:a.state.demand[t]*l,availability:Math.round(1e6*i)/1e6,id:e-1})}),r}},{key:"getBackLink",value:function(t){var e=-1;return this.state.links.forEach(function(n,a){n[0]===t[1]&&n[1]===t[0]&&(e=a)}),e}},{key:"addTip",value:function(t,e,n){var a=I.s("circle").filter(function(e,n){return e.id===t}).select(function(){return this.parentNode}).append("g").attr("class","tip").attr("transform","translate(6,6)"),r=a.append("rect").style("fill","white").style("stroke","steelblue").style("opacity",.8);a.append("text").text(e).attr("dy","1.2em").attr("x",8),a.append("text").text(n).attr("dy","2.4em").attr("x",8);var i=a.node().getBBox();r.attr("width",i.width+15).attr("height",i.height+10)}},{key:"updateGraph",value:function(){var t=this;I.s(".tip").remove(),I.s("line").each(function(t){I.r(this).style("stroke-opacity",.1)}),I.s("line").each(function(t){I.r(this).style("stroke-dasharray","")}),I.s("line").each(function(t){I.r(this).style("stroke","#888")}),I.s("line").attr("marker-end",""),I.s("circle").each(function(t){I.r(this).style("fill","lightgrey")}),I.s(".aEnd").style("opacity",this.state.showUtilization),this.dashLinks(this.state.dashLinks,"5,5"),this.colorNodes(this.state.colorNodes,"#aaa"),I.s("circle").filter(function(e,n){return e.id===t.state.firstSelected||e.id===t.state.secondSelected}).style("fill","steelblue"),this.state.tips.forEach(function(e){t.addTip(e.id,e.line1,e.line2)}),null===this.state.firstSelected&&null===this.state.secondSelected&&this.resetColors(),this.colorLinks(this.state.downLinks,"red")}},{key:"resetColors",value:function(){I.s("line").each(function(t){I.r(this).style("stroke-opacity",1)}),I.s("line").each(function(t){I.r(this).style("stroke-dasharray","")}),I.s("line").each(function(t){I.r(this).style("stroke","#888")}),I.s("line").attr("marker-end",""),I.s("circle").each(function(t){I.r(this).style("fill","black")})}},{key:"clearGraph",value:function(){var t=this;I.s("svg > .tip").remove(),I.s("svg > .links").remove(),I.s("svg > .nodes").remove(),this.setState({showPaths:!1,firstSelected:null,secondSelected:null,numSelected:0,tips:[]},function(){console.log(t.state)})}},{key:"arrowPress",value:function(t){if(39===t.keyCode&&this.state.flows[this.state.flowid]){var e=this.state.tunnelIndex+1>=this.state.flows[this.state.flowid].tunnels.length?0:this.state.tunnelIndex+1;this.changeTunnel(e)}else if(37===t.keyCode&&this.state.flows[this.state.flowid]){var n=this.state.tunnelIndex-1<0?this.state.flows[this.state.flowid].tunnels.length-1:this.state.tunnelIndex-1;this.changeTunnel(n)}else 38===t.keyCode&&this.state.scenarios.length>0?(t.preventDefault(),this.handleScenario(this.state.scenario-1<0?this.state.scenarios.length-1:this.state.scenario-1)):40===t.keyCode&&this.state.scenarios.length>0&&(t.preventDefault(),this.handleScenario(this.state.scenario+1<this.state.scenarios.length?this.state.scenario+1:0))}},{key:"showUtilization",value:function(t){for(var e=this,n=new Array(this.state.graph.links.length).fill(0),a=function(t){Object.values(e.state.flows).forEach(function(e){e.tunnels.forEach(function(a){a.links.forEach(function(r){r.index===t&&(n[t]+=a.weight*e.demand)})})})},r=0;r<=n.length-1;r++)a(r);var i=function(t){var e=I.s(".aEnd").filter(function(e,n){return n===t});e.html("".concat(Math.round(n[t]/e.data()[0].capacity*1e4)/100,"%")),n[t]/e.data()[0].capacity>1?e.style("fill","red"):e.style("fill","black")};for(r=0;r<=n.length-1;r++)i(r);this.setState({linkTraffic:n,showUtilization:t},this.updateGraph)}},{key:"changeTunnel",value:function(t){var e=this.state.flowid,n=this.state.flows[e],a=null!==e?n.tunnels[t].weight*n.demand:0,r=null!==e?n.tunnels:[],i=null!==e?r[t].links:[],s=null!==e?this.getTunnelNodes(r[t]):[],o=this.state.backFlowid,l=this.state.flows[o];null!==o&&(l.tunnels[t].weight,l.demand);this.setState({tunnelIndex:t,dashLinks:i,colorNodes:s,tips:[{id:this.state.firstSelected,line1:"Node: ".concat(this.state.firstSelected),line2:"Sent: ".concat(a)},{id:this.state.secondSelected,line1:"Node: ".concat(this.state.secondSelected),line2:"Received: ".concat(a)}]},this.updateGraph)}},{key:"getNodeDemand",value:function(t){var e=this,n=0,a=0;return Object.values(this.state.flows).forEach(function(r){t===r.src&&(n+=e.state.demand[r.id]),t===r.dst&&(a+=e.state.demand[r.id])}),[a,n]}},{key:"click",value:function(t){var e=this;if(0===this.state.numSelected||2===this.state.numSelected){var n=this.getNodeDemand(t.id),a=Object(U.a)(n,2),r=a[0],i=a[1];this.setState({numSelected:1,firstSelected:t.id,secondSelected:null,showPaths:!1,dashLinks:[],colorNodes:[],tips:[{id:t.id,line1:"Sent: ".concat(i),line2:"Received ".concat(r)}]},this.updateGraph)}else if(1===this.state.numSelected)if(this.state.firstSelected===t.id)this.setState({numSelected:0,firstSelected:null,secondSelected:null,tips:[],showPaths:!1,colorNodes:[],dashLinks:[]},this.updateGraph);else{var s=this.getFlow(this.state.firstSelected,t.id),o=this.getFlow(t.id,this.state.firstSelected);this.setState({numSelected:2,secondSelected:t.id,showPaths:!0,flowid:s?s.id:null,backFlowid:o?o.id:null},function(){e.changeTunnel(0)})}}},{key:"drawGraph",value:function(t){var e=this;document.addEventListener("keydown",this.arrowPress,!1);var n=I.i().force("link",I.g().id(function(t){return t.id}).distance(function(t){return 100})).force("charge",I.h().strength(-300)).force("center",I.f(this.svg.getBoundingClientRect().width/2,this.svg.getBoundingClientRect().height/2));this.setState({simulation:n},function(){var n=I.r(e.svg);n.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","-0 -5 10 10").attr("refX",13).attr("refY",0).attr("orient","auto").attr("markerWidth",3).attr("markerHeight",13).attr("xoverflow","visible").append("svg:path").attr("d","M 0,-5 L 10 ,0 L 0,5").attr("fill","#999").style("stroke","none"),I.k("./data/".concat(t,".json")).then(function(t,a){if(a)throw a;e.setState(Object(l.a)({},e.state,{graph:t}));var r=n.append("g").attr("class","links").selectAll("line").data(t.links).enter().append("g").attr("class","link").append("line").attr("class","link-line"),i=(n.selectAll(".link").append("text").attr("class","aEnd").data(t.links).attr("x",function(t){return t.source.x}).attr("y",function(t){return t.source.y}).attr("text-anchor","middle").style("font-size","10px").style("opacity",0).text("yo"),I.r("body").append("div").attr("class","tooltip").style("opacity",0)),s=n.append("g").attr("class","nodes").selectAll("circle").data(t.nodes).enter().append("g").attr("class","wrapper").attr("width",10).attr("height",10).on("click",e.click).call(I.c().on("start",e.dragstarted).on("drag",e.dragged).on("end",e.dragended));s.append("circle").attr("r",10);function o(t,e){var n=Math.atan2(e.y-t.y,e.x-t.x);return 30*Math.cos(n)+t.x}function c(t,e){var n=Math.atan2(e.y-t.y,e.x-t.x);return 30*Math.sin(n)+t.y}s.append("text").text(function(t){return t.id}).style("text-anchor","middle").style("fill","#999").style("cursor","pointer").style("font-size",12).attr("transform",function(t){return"translate(0,4)"}),s.append("title").text(function(t){return t.id}),n.selectAll("line").on("mouseover",function(t){i.transition().duration(200).style("opacity",.9),i.html("<i>p</i> = "+t.prob_failure).style("left",I.d.pageX+"px").style("top",I.d.pageY-28+"px")}).on("mouseout",function(t){i.transition().duration(200).style("opacity",0)}),e.state.simulation.nodes(t.nodes).on("tick",function(){r.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),n.selectAll("text.aEnd").attr("x",function(t){return o(t.source,t.target)}).attr("y",function(t){return c(t.source,t.target)}),n.selectAll("text.zEnd").attr("x",function(t){return o(t.target,t.source)}).attr("y",function(t){return c(t.target,t.source)}),s.attr("transform",function(t){return"translate("+t.x+","+t.y+")"})}),e.state.simulation.force("link").links(t.links)})})}},{key:"render",value:function(){var t,e=this;this.state.flowid&&(t=this.state.flows[this.state.flowid].tunnels.map(function(t,n){return r.a.createElement("tr",{className:n===e.state.tunnelIndex?"selected":"",key:n},r.a.createElement("td",{x:"0"},"Tunnel ",n),r.a.createElement("td",{x:"50"},t.weight),r.a.createElement("td",{x:"80"},t.availability))}));for(var n,a,i=0===this.state.showUtilization?r.a.createElement("div",{id:"utilizationButton",onClick:function(){return e.showUtilization(.6)}},"Utilization"):r.a.createElement("div",{id:"utilizationButton",onClick:function(){return e.showUtilization(0)}},"Off"),s=0,o=[],l=[],c=[],d=[],u=[],p=[],h=[],m=this.state.graph?new Array(this.state.graph.links.length).fill(0):[],b=function(t){d.push(r.a.createElement("th",{className:"border-bottom",key:s++},t));for(var n=[],a=[],i=[],o=function(s){var o="-",l=0,c=0;Object.values(e.state.flows).forEach(function(n,a){n.src===t.toString()&&n.dst===s.toString()&&(o=n.demand,n.tunnels.forEach(function(t,a){l+=t.sent;var r=!1;t.links.forEach(function(t){var n=e.state.graph.links.filter(function(e,n){return n===t.index});n[0]&&m[t.index]>=n[0].capacity&&(r=!0)}),r||(t.links.forEach(function(e){m[e.index]+=t.weight*n.demand}),c+=t.weight*n.demand)}))}),n.push(r.a.createElement("td",null,"-"===o?o:Math.round(100*o)/100)),a.push(r.a.createElement("td",null,0===l?"-":Math.round(100*c)/100)),i.push(r.a.createElement("td",null,"-"===o?0:"".concat(Math.round(100*c/o),"%"))),c,"-"===o?0:o},l=1;l<=parseInt(e.state.num_nodes);l++)o(l);u.push(r.a.createElement("tr",{key:s++},r.a.createElement("th",{className:"border-right"},t),n)),p.push(r.a.createElement("tr",{key:s++},r.a.createElement("th",{className:"border-right"},t),a)),h.push(r.a.createElement("tr",{key:s++},r.a.createElement("th",{className:"border-right"},t),i))},f=1;f<=parseInt(this.state.num_nodes);f++)b(f);return o.push(r.a.createElement("tr",{key:s++},r.a.createElement("th",null),d)),o.push(u),l.push(r.a.createElement("tr",{key:s++},r.a.createElement("th",null),d)),l.push(p),c.push(r.a.createElement("tr",{key:s++},r.a.createElement("th",null),d)),c.push(h),this.state.scenarios&&this.state.scenarioSatisfaction&&(n=this.state.scenarios.map(function(t,n){return r.a.createElement("option",{key:n,value:n},"Scenario ".concat(n," (").concat(Math.round(1e6*e.state.probabilities[n])/1e4,"%)\n                                (").concat(Math.round(1e6*e.state.scenarioSatisfaction[n])/1e4,")"))})),this.state.cvar&&(a=r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"border-bottom",style:{"padding-left":"10px"}},"VAR"),r.a.createElement("th",{className:"border-bottom"},"CVAR")),r.a.createElement("tr",null,r.a.createElement("td",{style:{"padding-left":"20px"}},this.state.var),r.a.createElement("td",null,"".concat(Math.round(1e6*this.state.cvar)/1e4,"%"))))),r.a.createElement(W,null,r.a.createElement(H,{ref:function(t){return e.svg=t}},r.a.createElement("foreignObject",{x:"7",y:"7",width:"100%",height:"100%",pointerEvents:"none"},i),r.a.createElement("foreignObject",{x:"0",y:"0",width:"100%",height:"100%",pointerEvents:"none"},r.a.createElement("select",{onChange:function(t){return e.handleScenario(t.target.value)},value:this.state.scenario},n)),this.state.showPaths&&r.a.createElement("foreignObject",{x:"0",y:"0",width:"100%",height:"100%",pointerEvents:"none",style:{padding:"14px"}},r.a.createElement(q,null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"weight"),r.a.createElement("th",null,"availability")),t)))),r.a.createElement("div",{className:"tableTitle"},"Demand"),r.a.createElement(Q,null,r.a.createElement("tbody",null,o)),r.a.createElement("div",{className:"tableTitle"},"Successful Demand"),r.a.createElement(Q,null,r.a.createElement("tbody",null,l)),r.a.createElement("div",{className:"tableTitle"},"Satisfied Demand"),r.a.createElement(Q,null,r.a.createElement("tbody",null,c)),r.a.createElement("div",{className:"tableTitle"},"Loss"),r.a.createElement(Q,null,a))}}]),e}(a.Component);n(32);function tt(){var t=Object(b.a)(["\n    background-color: #CCC\n    padding: 20px;\n    text-align: center;\n    transition: .1s all;\n\n    &:hover {\n        background-color: #999;\n        cursor: pointer;\n    }\n"]);return tt=function(){return t},t}function et(){var t=Object(b.a)(["\n    width: 100vw;\n    height: 70vh;\n\n    #inputs {\n        text-align: center;\n        padding-top: 40px;\n        width: 100%;\n    }\n    #graph {\n        background-color: #EEE;\n        margin-top: 20px;\n        border: 1px solid gray;\n        height: 70vh;\n        width: 70%;\n        margin-left: auto;\n        margin-right: auto;\n    }\n"]);return et=function(){return t},t}var nt=f.a.div(et()),at=f.a.div(tt()),rt=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(p.a)(e).call(this,t))).state={login:!1,te:{inputs:{topology:"Custom",demand:"1",path:"SMORE",beta:".9",cutoff:".0001",k:"4",downscale_demand:"1000",zeroindex:"false",demand_matrix:"true",num_nodes:0},results:{var:0,cvar:0,allocation:[],flows:[],T:[],Tf:[],links:[]},show_results:!1},stocks:{inputs:{tickers:[""],beta:.9,roi:50,target:40,days:800,budget:1e3,KEYS:["F6JGTHROSNY4A8MV","EGZPCEQOXI85VKRT","ASDPVYC2XRAJJ81K","M4XW13HI1CWYH0KN"],key:0},results:{},show_results:!1},error:"",mode:"TE"},n.setMode=n.setMode.bind(Object(m.a)(Object(m.a)(n))),n.login=n.login.bind(Object(m.a)(Object(m.a)(n))),n.removeError=n.removeError.bind(Object(m.a)(Object(m.a)(n))),n.handleTESubmit=n.handleTESubmit.bind(Object(m.a)(Object(m.a)(n))),n.handleTEInput=n.handleTEInput.bind(Object(m.a)(Object(m.a)(n))),n.handleStockInput=n.handleStockInput.bind(Object(m.a)(Object(m.a)(n))),n.handleTickerValue=n.handleTickerValue.bind(Object(m.a)(Object(m.a)(n))),n.handleAddTicker=n.handleAddTicker.bind(Object(m.a)(Object(m.a)(n))),n.handleTickerSubmit=n.handleTickerSubmit.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(e,t),Object(d.a)(e,[{key:"setMode",value:function(t){this.setState(Object(l.a)({},this.state,{mode:t}))}},{key:"removeError",value:function(){this.setState(Object(l.a)({},this.state,{error:""}))}},{key:"login",value:function(t){"CVaR2019!"===t&&this.setState(Object(l.a)({},this.state,{login:!0}))}},{key:"handleStockInput",value:function(t,e){this.setState(Object(l.a)({},this.state,{stocks:Object(l.a)({},this.state.stocks,{inputs:Object(l.a)({},this.state.stocks.inputs,Object(o.a)({},e,t)),show_results:!1})}))}},{key:"handleTickerValue",value:function(t,e){var n=this.state.stocks.inputs.tickers;n[e]=t,this.setState(Object(l.a)({},this.state,{stocks:{inputs:Object(l.a)({},this.state.stocks.inputs,{tickers:n}),show_results:!1}}))}},{key:"handleAddTicker",value:function(){var t=this.state.stocks.inputs.tickers;t.push(""),this.setState(Object(l.a)({},this.state,{stocks:Object(l.a)({},this.state.stocks,{inputs:Object(l.a)({},this.state.stocks.inputs,{tickers:t}),show_results:!1})}))}},{key:"handleTickerSubmit",value:function(){var t=this,e=[],n=[];console.log(this.state.stocks.inputs.key),Promise.all(this.state.stocks.inputs.tickers.map(function(a){return new Promise(function(r,i){fetch("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=".concat(a,"&outputsize=full&apikey=").concat(t.state.stocks.inputs.KEYS[t.state.stocks.inputs.key]),{method:"GET",mode:"cors"}).then(function(t){return t.json()}).then(function(i){for(var s=[],o=i["Time Series (Daily)"],l=Object.keys(o),c=o[l[t.state.stocks.inputs.days+1]]["4. close"],d=t.state.stocks.inputs.days;d>=0;d--){var u=o[l[d]]["4. close"];s.push((u-c)/c),c=u}e.push(s),n.push(a),r()}).catch(function(t){i(t)})})})).then(function(){console.log({nstocks:t.state.stocks.inputs.tickers.length,returns:e,beta:t.state.stocks.inputs.beta,ticker_ordered:n});fetch("http://128.30.92.156:8080/api/cvarf",{method:"POST",mode:"cors",body:JSON.stringify({nstocks:t.state.stocks.inputs.tickers.length,returns:e,beta:parseFloat(t.state.stocks.inputs.beta),roi:parseFloat(t.state.stocks.inputs.roi/t.state.stocks.inputs.budget),target:parseFloat(t.state.stocks.inputs.target/t.state.stocks.inputs.budget)}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(e){t.setState(Object(l.a)({},t.state,{stocks:Object(l.a)({},t.state.stocks,{results:e,show_results:!0,tickers:n})}))}).catch(function(t){return console.error("Error:",t)})}).catch(function(e){console.log(e);var n=t.state.stocks.inputs.key,a=t.state.stocks.inputs.key+1>=t.state.stocks.inputs.KEYS.length?0:t.state.stocks.inputs.key+1;t.setState(Object(l.a)({},t.state,{stocks:Object(l.a)({},t.state.stocks,{inputs:Object(l.a)({},t.state.stocks.inputs,{key:a})}),error:{error:e,message:"API error with key ".concat(n,"...")}}))})}},{key:"handleTEInput",value:function(t,e){console.log(this.state.te.inputs),this.setState(Object(l.a)({},this.state,{te:Object(l.a)({},this.state.te,{inputs:Object(l.a)({},this.state.te.inputs,Object(o.a)({},e,t)),show_results:!1})}))}},{key:"handleTESubmit",value:function(){var t=this,e={topology:this.state.te.inputs.topology,demand:this.state.te.inputs.demand,path:this.state.te.inputs.path,beta:this.state.te.inputs.beta,cutoff:this.state.te.inputs.cutoff};switch(this.state.te.inputs.path.includes("ksp")?e.k="".concat(this.state.te.inputs.path.split("_")[1]):e.k="4",e.topology){case"Custom":e.num_nodes="6",e.downscale_demand="1",e.zeroindex="false",e.demand_matrix="false";break;case"B4":e.num_nodes="12",e.downscale_demand="1",e.zeroindex="false",e.demand_matrix="true";break;case"IBM":e.num_nodes="17",e.downscale_demand="1000",e.zeroindex="false",e.demand_matrix="true";break;case"Abilene":e.num_nodes="12",e.downscale_demand="1000000",e.zeroindex="false",e.demand_matrix="true";break;default:e.num_nodes="12",e.downscale_demand="1000",e.zeroindex="false",e.demand_matrix="true"}fetch("http://128.30.92.156:8080/api/tecvar",{method:"POST",mode:"cors",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(n){console.log(n),t.setState(Object(l.a)({},t.state,{te:Object(l.a)({},t.state.te,{inputs:Object(l.a)({},t.state.te.inputs,{num_nodes:e.num_nodes,zeroindex:e.zeroindex}),results:n,show_results:!0})}))}).catch(function(t){return console.error("Error:",t)})}},{key:"render",value:function(){var t,e;return"TE"===this.state.mode?(e=r.a.createElement(v,{modes:["TE","Stocks"],mode:this.state.mode,setMode:this.setMode}),t=r.a.createElement("div",null,r.a.createElement(nt,null,r.a.createElement("div",{id:"inputs"},r.a.createElement(w,{handleTESubmit:this.handleTESubmit,handleTEInput:this.handleTEInput})),r.a.createElement("div",{id:"graph"},r.a.createElement(Z,{num_nodes:this.state.te.inputs.num_nodes,topology:this.state.te.inputs.topology,T:this.state.te.results.T,Tf:this.state.te.results.Tf,links:this.state.te.results.links,flows:this.state.te.results.flows,allocation:this.state.te.results.allocation,demand:this.state.te.results.demand,probabilities:this.state.te.results.probabilities,scenarios:this.state.te.results.scenarios,X:this.state.te.results.X,var:this.state.te.results.var,cvar:this.state.te.results.cvar}))))):this.state.login?(e=r.a.createElement(v,{modes:["TE","Stocks"],mode:this.state.mode,setMode:this.setMode}),t=r.a.createElement("div",null,r.a.createElement(A,{handleTickerValue:this.handleTickerValue,handleStockInput:this.handleStockInput,handleAddTicker:this.handleAddTicker,handleTickerSubmit:this.handleTickerSubmit,tickers:this.state.stocks.inputs.tickers,tickerMatches:this.state.stocks.tickerMatches}),this.state.stocks.show_results&&r.a.createElement(V,{data:this.state.stocks.results,roi:parseFloat(this.state.stocks.inputs.roi),target:parseFloat(this.state.stocks.inputs.target),tickers:this.state.stocks.tickers,budget:parseFloat(this.state.stocks.inputs.budget)}))):(t=r.a.createElement(M,{login:this.login}),e=r.a.createElement(v,{modes:["TE","Stocks"],mode:this.state.mode,setMode:this.setMode})),r.a.createElement("div",null,e,""!==this.state.error&&r.a.createElement(at,{onClick:this.removeError},this.state.error.message),t)}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(rt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.56ad90c6.chunk.js.map